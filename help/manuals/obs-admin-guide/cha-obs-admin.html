<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>Administrator Guide | High-level Overview</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="High-level Overview"/>
<meta name="description" content="This chapter describes the components of an OBS installation and the typical administration tasks for an OBS administrator."/>
<meta name="book-title" content="Administrator Guide"/>
<meta name="chapter-title" content="Chapter 1. High-level Overview"/>
<meta name="tracker-url" content="https://github.com/openSUSE/obs-docu/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="High-level Overview"/>
<meta property="og:description" content="This chapter describes the components of an OBS installatio…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="High-level Overview"/>
<meta name="twitter:description" content="This chapter describes the components of an OBS installatio…"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Product &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "High-level Overview",
  
    "description": "High-level Overview",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="bk02pr01.html" title="About this Guide"/><link rel="next" href="obs-cha-installation-and-configuration.html" title="Chapter 2. Installation and Configuration"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="wide offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"/></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Administrator Guide</a><span> / </span><a class="crumb" href="cha-obs-admin.html">High-level Overview</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Administrator Guide</div><ol><li><a href="bk02pr01.html" class=" "><span class="title-number"> </span><span class="title-name">About this Guide</span></a></li><li><a href="cha-obs-admin.html" class=" you-are-here"><span class="title-number">1 </span><span class="title-name">High-level Overview</span></a></li><li><a href="obs-cha-installation-and-configuration.html" class=" "><span class="title-number">2 </span><span class="title-name">Installation and Configuration</span></a></li><li><a href="obs-cha-overview-filesystem.html" class=" "><span class="title-number">3 </span><span class="title-name">File System Overview</span></a></li><li><a href="obs-cha-security-concepts.html" class=" "><span class="title-number">4 </span><span class="title-name">Security Concepts</span></a></li><li><a href="obs-cha-administration.html" class=" "><span class="title-number">5 </span><span class="title-name">Administration</span></a></li><li><a href="obs-cha-troubleshooting.html" class=" "><span class="title-number">6 </span><span class="title-name">Troubleshooting</span></a></li><li><a href="cha-obs-best-practices-localsetup.html" class=" "><span class="title-number">7 </span><span class="title-name">Setting Up a Local OBS Instance</span></a></li><li><a href="bk02apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU Licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-obs-admin" data-id-title="High-level Overview"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">1 </span><span class="title-name">High-level Overview</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> This chapter describes the components of an OBS installation and the
  typical administration tasks for an OBS administrator. </p><p> This chapter is not intended to describe special installation hints for
  a certain OBS version. Refer to the <a class="link" href="http://openbuildservice.org/download/" target="_blank">OBS download page</a>
  for that. </p><section class="sect1" id="cha-obs-admin-components" data-id-title="OBS Components"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.1 </span><span class="title-name">OBS Components</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#cha-obs-admin-components">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The OBS is not a monolithic server: it consists of multiple daemons
  that perform different tasks. </p><div class="figure" id="id-1.3.5.5.3"><div class="figure-contents"><div class="mediaobject"><a href="images/obs_components.png"><img src="images/obs_components.png" width="80%" alt="Simplified OBS Component Overview" title="Simplified OBS Component Overview"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 1.1: </span><span class="title-name">Simplified OBS Component Overview </span></span><a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div><section class="sect2" id="id-1.3.5.5.4" data-id-title="Front-end"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.1.1 </span><span class="title-name">Front-end</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.4">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The OBS Front-end is a Ruby on Rails application that manages the
   access and manipulation of OBS data. It provides a web user interface and an
   application programming interface to do so. Both can be used to create,
   read, update and delete users, projects, packages, requests and other
   objects. It also implements additional sub-systems like authentication,
   search, and email notifications. </p></section><section class="sect2" id="id-1.3.5.5.5" data-id-title="Back-end"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.1.2 </span><span class="title-name">Back-end</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The OBS Back-end is a collection of Perl applications that manage the
   source files and build jobs of the OBS. </p><section class="sect3" id="id-1.3.5.5.5.3" data-id-title="Source Server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.1 </span><span class="title-name">Source Server</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.3">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Maintains the source repository and project/package configurations.
    It provides an HTTP interface, which is the only interface to the
    front-end. It may forward requests to other back-end services. Each OBS
    installation has exactly one Source Server. It maintains the "sources",
    "trees" and "projects" directories. </p></section><section class="sect3" id="id-1.3.5.5.5.4" data-id-title="Repository Server"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.2 </span><span class="title-name">Repository Server</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.4">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> A repository server provides access to the binaries via an HTTP
    interface. It is used by the front-end via the source server only. Workers
    use the server to register, request the binaries needed for build jobs, and
    store the results. Notifications for schedulers are also created by
    repository servers. Each OBS installation has at least one repository
    server. A larger installation using partitioning has one on each partition.
   </p></section><section class="sect3" id="id-1.3.5.5.5.5" data-id-title="Scheduler"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.3 </span><span class="title-name">Scheduler</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.5">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> A scheduler calculates the need for build jobs. It detects changes in
    sources, project configurations or in binaries used in the build
    environment. It is responsible for starting jobs in the right order and
    integrating the built binary packages. Each OBS installation has one
    scheduler per available architecture and partition. It maintains the
    "build" directory. </p></section><section class="sect3" id="id-1.3.5.5.5.6" data-id-title="Dispatcher"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.4 </span><span class="title-name">Dispatcher</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.6">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The dispatcher takes a job (created by the scheduler) and assigns it
    to a free worker. It also checks possible build constraints to verify that
    the worker qualifies for the job. It only notifies a worker about a job;
    the worker itself downloads the required resources. Each OBS installation
    has one dispatcher per partition (one of which is the master dispatcher).
   </p></section><section class="sect3" id="id-1.3.5.5.5.7" data-id-title="Publisher"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.5 </span><span class="title-name">Publisher</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.7">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The publisher processes "publish" events from the scheduler for
    finished repositories. It merges the build result of all architectures into
    a defined directory structure, creates the required metadata, and
    optionally syncs it to a download server. It maintains the "repos"
    directory on the back-end. Each OBS installation has one publisher per
    partition. </p></section><section class="sect3" id="id-1.3.5.5.5.8" data-id-title="Source Publisher"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.6 </span><span class="title-name">Source Publisher</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.8">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The source publisher processes "sourcepublish" events from the publisher for
    published binary repositories. It needs to run on the same instance as the source server.
    It can be used to publish a filesystem structure providing all sources of
    published binaries. In case of images or containers this also includes the sources
    of used binary packages.</p></section><section class="sect3" id="id-1.3.5.5.5.9" data-id-title="Worker"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.7 </span><span class="title-name">Worker</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.9">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The workers register with the repository servers. They receive build
    jobs from the dispatcher. Afterwards they download sources from source
    server and the required binaries from the repository server(s). They build
    the package using the build script and send the results back to the
    repository server. A worker can run on the same host as other services, but
    most OBS installations have dedicated hardware for the workers. </p></section><section class="sect3" id="id-1.3.5.5.5.10" data-id-title="Signer"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.8 </span><span class="title-name">Signer</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.10">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The signer handles signing events and calls an external tool to
    execute the signing. Each OBS installation usually has one signer per
    partition and one on the source server installation. </p></section><section class="sect3" id="id-1.3.5.5.5.11" data-id-title="Warden"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.9 </span><span class="title-name">Warden</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.11">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The warden monitors the workers and detects crashed or hanging
    workers. Their build jobs will be canceled and restarted on another host.
    Each OBS installation can have one Warden service running on each
    partition. </p></section><section class="sect3" id="id-1.3.5.5.5.12" data-id-title="Download on Demand Updater (dodup)"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.10 </span><span class="title-name">Download on Demand Updater (dodup)</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.12">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The download on demand updater monitors all external repositories
    which are defined as "download on demand" resources. It polls for changes
    in the metadata and re-downloads the metadata as needed. The scheduler will
    be notified to recalculate the build jobs depending on these repositories
    afterwards. Each OBS installation can have one dodup service running on
    each partition. </p></section><section class="sect3" id="id-1.3.5.5.5.13" data-id-title="Delta Store"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.1.2.11 </span><span class="title-name">Delta Store</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.5.13">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The delta store daemon maintains the deltas in the source storage.
    Multiple obscpio archives can be stored in one deltastore to avoid
    duplication on disk. This service calculates the delta and maintains the
    delta store. Each OBS installation can have one delta store process running
    next to the source server. </p></section></section><section class="sect2" id="id-1.3.5.5.6" data-id-title="Command Line Client"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.1.3 </span><span class="title-name">Command Line Client</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The Open Build Service Commander (osc) is a Python application with a
   Subversion-style command-line interface. It can be used to manipulate or
   query data from the OBS through its application programming interface.
  </p></section><section class="sect2" id="id-1.3.5.5.7" data-id-title="Content Delivery Server"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.1.4 </span><span class="title-name">Content Delivery Server</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.7">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The OBS is agnostic about how you serve build results to your users.
   It will just write repositories to disk. But many people sync these
   repositories to some content delivery system like <a class="link" href="http://mirrorbrain.org/" target="_blank">MirrorBrain</a>. </p></section><section class="sect2" id="id-1.3.5.5.8" data-id-title="Requirements"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.1.5 </span><span class="title-name">Requirements</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.5.8">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> We highly recommend, and in fact only test, installations on the <a class="link" href="https://www.suse.com/products/server/" target="_blank">SUSE Linux Enterprise
    Server</a> and <a class="link" href="http://www.opensuse.org" target="_blank">openSUSE</a> operating systems. However, there also are installations
   on Debian and Fedora systems. </p><p> The OBS also needs a SQL database (MySQL or MariaDB) for persistent
   and a memcache daemon for volatile data. </p></section></section><section class="sect1" id="cha-obs-admin-appliance" data-id-title="OBS Appliances"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.2 </span><span class="title-name">OBS Appliances</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#cha-obs-admin-appliance">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> This chapter gives an overview over the different OBS appliances and
  how to deploy them for production use. </p><section class="sect2" id="id-1.3.5.6.3" data-id-title="Server Appliance"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.2.1 </span><span class="title-name">Server Appliance</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.6.3">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The OBS server appliance contains a recent openSUSE distribution with
   a pre-installed and pre-configured OBS front-end, back-end and worker. The
   operating system on this appliance adapts to the hardware on first boot and
   defaults to automatic IP and DNS configuration via DHCP. </p></section><section class="sect2" id="id-1.3.5.6.4" data-id-title="Worker Appliance"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.2.2 </span><span class="title-name">Worker Appliance</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.6.4">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The OBS worker appliance includes a recent openSUSE distribution and
   the OBS worker component. The operating system on this appliance adapts to
   the hardware on first boot, defaults to automatic IP and DNS configuration
   via DHCP and OBS server discovery via SLP. </p></section><section class="sect2" id="id-1.3.5.6.5" data-id-title="Image Types"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.2.3 </span><span class="title-name">Image Types</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.6.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> There are different types of OBS appliance images.</p><div class="table" id="cha-obs-best-practices-appliance-types" data-id-title="Appliance Types"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 1.1: </span><span class="title-name">Appliance Types </span></span><a title="Permalink" class="permalink" href="cha-obs-admin.html#cha-obs-best-practices-appliance-types">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">File Name Suffix</th><th style="text-align: left; border-bottom: 1px solid ; ">Appliance for</th></tr></thead><tbody><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> .vdi </td><td style="text-align: left; border-bottom: 1px solid ; "><a class="link" href="https://www.virtualbox.org/" target="_blank">VirtualBox</a>.
       </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> .vmdk </td><td style="text-align: left; border-bottom: 1px solid ; ">
        <p><a class="link" href="http://www.vmware.com/" target="_blank">VMware</a>
         Workstation and Player.</p>
        <div id="id-1.3.5.6.5.3.2.2.2.2.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p> Our VirtualBox images are usually better tested. </p></div>
       </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> .qcow2 </td><td style="text-align: left; border-bottom: 1px solid ; "><a class="link" href="http://qemu.org" target="_blank">QEMU/KVM</a>. </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> .raw </td><td style="text-align: left; border-bottom: 1px solid ; "> Direct writing to a block device </td></tr><tr><td style="text-align: left; border-right: 1px solid ; "> .tgz </td><td style="text-align: left; "> Deploying via PXE from a central server </td></tr></tbody></table></div></div></section><section class="sect2" id="id-1.3.5.6.6" data-id-title="Deployment"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.2.4 </span><span class="title-name">Deployment</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.6.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> To help you deploy the OBS server appliance to a hard disk there is a
   basic installer that you can boot from a USB stick. The installer can be
   found on the <a class="link" href="http://openbuildservice.org/download/" target="_blank">OBS
    Download page</a>. </p><p> The image can be written to a USB stick to boot from it:</p><div class="verbatim-wrap"><pre class="screen"><code class="command">xzcat obs-server-install.x86_64.raw.xz &gt; /dev/sdX</code></pre></div><div id="id-1.3.5.6.6.5" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p> /dev/sdX is the main device of your USB stick. Do NOT put it into a
    partition like /dev/sda1. If you use the wrong device, you will destroy all
    data on it! </p></div><p> How to deploy the other image types deeply depends on your
   virtualization setup. Describing this is out of scope for this guide, sorry.
  </p></section><section class="sect2" id="id-1.3.5.6.7" data-id-title="Separating Data from the System"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.2.5 </span><span class="title-name">Separating Data from the System</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.6.7">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> For production use you want to separate the OBS data from operating
   system of the appliance so you can re-deploy the appliance without touching
   your OBS data. This can be achieved by creating an LVM volume group with the
   name "OBS". This volume group should be as large as possible because it is
   getting used by the OBS back-end for data storage and the OBS workers for
   root/swap/cache file systems. To create an LVM volume prepare a partition of
   type "8e" and create the LVM via</p><div class="verbatim-wrap"><pre class="screen"><code class="command">pvcreate /dev/sdX1</code>
<code class="command">vgcreate "OBS" /dev/sdX1</code></pre></div><p>
   Additionally, if the OBS volume group contains a logical volume named
   <span class="quote">“<span class="quote">server</span>”</span>, it will be used as the data partition for the server.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">lvcreate "OBS" -n "server"</code>
<code class="command">mkfs.xfs /dev/OBS/server</code></pre></div></section><section class="sect2" id="id-1.3.5.6.8" data-id-title="Updating the Appliance"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.2.6 </span><span class="title-name">Updating the Appliance</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.6.8">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> All images come pre-configured with the right set of repositories and
   can be updated via the system tools YaST or <code class="command">zypper</code> at any
   time. Another way to update is to re-deploy the entire image. </p><div id="id-1.3.5.6.8.3" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p> If you re-deploy the entire image, keep in mind that you need to have
    your data directory (<code class="filename">/srv/obs</code>) on a separate storage
    (LVM volume, partition etc.) otherwise it will be deleted! </p></div></section></section><section class="sect1" id="cha-obs-admin-backend" data-id-title="Back-end Administration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.3 </span><span class="title-name">Back-end Administration</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#cha-obs-admin-backend">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><section class="sect2" id="id-1.3.5.7.3" data-id-title="Services"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.3.1 </span><span class="title-name">Services</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.7.3">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> You can control the different back-end components via
    <code class="command">systemctl</code>. You can enable/disable the service
   during booting the system and start/stop/restart it in a running system.
   For more information, see <a class="link" href="https://www.freedesktop.org/software/systemd/man/systemctl.html#Commands" target="_blank">man page</a>. For example, to restart the
   repository server, use:</p><div class="verbatim-wrap"><pre class="screen"><code class="command">systemctl restart obsrepserver.service</code></pre></div><div class="table" id="tab-obs-service-names" data-id-title="Service Names"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 1.2: </span><span class="title-name">Service Names </span></span><a title="Permalink" class="permalink" href="cha-obs-admin.html#tab-obs-service-names">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><thead><tr><th style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">Component</th><th style="text-align: left; border-bottom: 1px solid ; ">Service Name</th></tr></thead><tbody><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Source Server </td><td style="text-align: left; border-bottom: 1px solid ; "> obssrcserver.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Repository Server </td><td style="text-align: left; border-bottom: 1px solid ; "> obsrepserver.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Scheduler </td><td style="text-align: left; border-bottom: 1px solid ; "> obsscheduler.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Dispatcher </td><td style="text-align: left; border-bottom: 1px solid ; "> obsdispatcher.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Publisher </td><td style="text-align: left; border-bottom: 1px solid ; "> obspublisher.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Source Publisher </td><td style="text-align: left; border-bottom: 1px solid ; "> obssourcepublish.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Worker </td><td style="text-align: left; border-bottom: 1px solid ; "> obsworker.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Source Services </td><td style="text-align: left; border-bottom: 1px solid ; "> obsservice.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Download On Demand Repository Meta Data Updates </td><td style="text-align: left; border-bottom: 1px solid ; "> obsdodup.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Delta Storage </td><td style="text-align: left; border-bottom: 1px solid ; "> obsdeltastore.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; "> Signer </td><td style="text-align: left; border-bottom: 1px solid ; "> obssigner.service </td></tr><tr><td style="text-align: left; border-right: 1px solid ; "> Warden </td><td style="text-align: left; "> obswarden.service </td></tr></tbody></table></div></div></section><section class="sect2" id="id-1.3.5.7.4" data-id-title="Advanced Setups"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.3.2 </span><span class="title-name">Advanced Setups</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.7.4">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> It makes sense to run some of the different components of the OBS
   back-end on isolated hosts. </p><section class="sect3" id="id-1.3.5.7.4.3" data-id-title="Distributed Workers"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">1.3.2.1 </span><span class="title-name">Distributed Workers</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.7.4.3">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> OBS workers can be very resource hungry. It all depends on the
    software that is being built, and how. Single builds deep down in the
    dependency chain can also trigger a sea of jobs. It makes sense to split
    off workers from all the other services so they do not have to fight for
    the same operating system/hardware resources. Here is an example on how to
    setup a remote OBS worker. </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Install the worker package called obs-worker </p></li><li class="listitem"><p> Configure the OBS repository server address in the file
      /etc/sysconfig/obs-server. Change the variable OBS_REPO_SERVERS to the
      host name of the machine on which the repository server is running:
      OBS_REPO_SERVERS="myreposerver.example:5252" </p></li><li class="listitem"><p> Start the worker </p></li></ol></div></section></section></section><section class="sect1" id="cha-obs-admin-frontend" data-id-title="Front-end Administration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1.4 </span><span class="title-name">Front-end Administration</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#cha-obs-admin-frontend">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The Ruby on Rails application is run through the Apache web server with
   <a class="link" href="https://www.phusionpassenger.com/" target="_blank">mod_passenger</a>.
  You can control it via <code class="command">systemctl</code></p><div class="verbatim-wrap"><pre class="screen"><code class="command">systemctl {start, stop, restart} apache2</code></pre></div><section class="sect2" id="id-1.3.5.8.4" data-id-title="Delayed Jobs"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.4.1 </span><span class="title-name">Delayed Jobs</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.8.4">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Another component of the OBS front-end are delayed jobs for
   asynchronously executing longer tasks in the background. You can control
   this service also via <code class="command">systemctl</code>.</p><div class="verbatim-wrap"><pre class="screen"><code class="command">systemctl {start, stop, restart} obsapidelayed</code></pre></div></section><section class="sect2" id="id-1.3.5.8.5" data-id-title="Full Text Search"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.4.2 </span><span class="title-name">Full Text Search</span></span> <a title="Permalink" class="permalink" href="cha-obs-admin.html#id-1.3.5.8.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The full-text search for packages and projects is handled by <a class="link" href="http://freelancing-gods.com/thinking-sphinx/" target="_blank">Thinking
    Sphinx</a>. The delayed job daemon will take care of starting this
    service. To control it after boot, use the
    <code class="command">rake</code> tasks it provides.</p><div class="verbatim-wrap"><pre class="screen"><code class="command">rake ts:{start, stop, rebuild, index}</code></pre></div></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="bk02pr01.html"><span class="pagination-relation">Previous</span><span class="pagination-label">About this Guide</span></a> </div><div><a class="pagination-link next" href="obs-cha-installation-and-configuration.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 2 </span>Installation and Configuration</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-obs-admin.html#cha-obs-admin-components"><span class="title-number">1.1 </span><span class="title-name">OBS Components</span></a></span></li><li><span class="sect1"><a href="cha-obs-admin.html#cha-obs-admin-appliance"><span class="title-number">1.2 </span><span class="title-name">OBS Appliances</span></a></span></li><li><span class="sect1"><a href="cha-obs-admin.html#cha-obs-admin-backend"><span class="title-number">1.3 </span><span class="title-name">Back-end Administration</span></a></span></li><li><span class="sect1"><a href="cha-obs-admin.html#cha-obs-admin-frontend"><span class="title-number">1.4 </span><span class="title-name">Front-end Administration</span></a></span></li></ul></div> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>
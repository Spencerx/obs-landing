<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>User Guide | Build Constraints</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Build Constraints"/>
<meta name="description" content="Build constraints provide a way for the user to specify build worker parameters that the Build Service will use to decide which build workers are &quot;qu…"/>
<meta name="book-title" content="User Guide"/>
<meta name="chapter-title" content="Chapter 34. Build Constraints"/>
<meta name="tracker-url" content="https://github.com/openSUSE/obs-docu/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Build Constraints"/>
<meta property="og:description" content="Build constraints provide a way for the user to specify bui…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Build Constraints"/>
<meta name="twitter:description" content="Build constraints provide a way for the user to specify bui…"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Product &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Build Constraints",
  
    "description": "Build Constraints",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-obs-build-scheduling-and-dispatching.html" title="Chapter 33. Scheduling and Dispatching"/><link rel="next" href="cha-obs-build-preinstall.html" title="Chapter 35. Building Preinstall Images"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="wide offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"/></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">User Guide</a><span> / </span><a class="crumb" href="par-reference.html">Reference</a><span> / </span><a class="crumb" href="cha-obs-build-constraints.html">Build Constraints</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">User Guide</div><ol><li><a href="bk01pr01.html" class=" "><span class="title-number"> </span><span class="title-name">About this Guide</span></a></li><li><a href="par-first-steps.html" class="has-children "><span class="title-number">I </span><span class="title-name">First Steps</span></a><ol><li><a href="art-obs-bg.html" class=" "><span class="title-number">1 </span><span class="title-name">Beginnerʼs Guide</span></a></li></ol></li><li><a href="par-concepts.html" class="has-children "><span class="title-number">II </span><span class="title-name">Concepts</span></a><ol><li><a href="cha-obs-package-formats.html" class=" "><span class="title-number">2 </span><span class="title-name">Supported Build Recipes and Package Formats</span></a></li></ol></li><li><a href="bk01pt03.html" class="has-children "><span class="title-number">III </span><span class="title-name">Setup</span></a><ol><li><a href="cha-obs-osc.html" class=" "><span class="title-number">3 </span><span class="title-name">osc, the Command Line Tool</span></a></li><li><a href="cha-obs-prjconfig.html" class=" "><span class="title-number">4 </span><span class="title-name">Build Configuration</span></a></li></ol></li><li><a href="par-working.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Usage</span></a><ol><li><a href="cha-obs-basicworkflow.html" class=" "><span class="title-number">5 </span><span class="title-name">Basic OBS Workflow</span></a></li><li><a href="cha-obs-local-building.html" class=" "><span class="title-number">6 </span><span class="title-name">Local Building</span></a></li><li><a href="cha-obs-source-services.html" class=" "><span class="title-number">7 </span><span class="title-name">Using Source Services</span></a></li><li><a href="cha-obs-scm-ci-workflow-integration.html" class=" "><span class="title-number">8 </span><span class="title-name">SCM/CI Workflow Integration</span></a></li><li><a href="cha-obs-stagingworkflow.html" class=" "><span class="title-number">9 </span><span class="title-name">Staging Workflow</span></a></li><li><a href="cha-obs-notifications.html" class=" "><span class="title-number">10 </span><span class="title-name">Notifications</span></a></li><li><a href="cha-obs-moderation.html" class=" "><span class="title-number">11 </span><span class="title-name">Moderation</span></a></li></ol></li><li><a href="par-best-practices.html" class="has-children "><span class="title-number">V </span><span class="title-name">Best Practices</span></a><ol><li><a href="cha-obs-best-practices-webuiusage.html" class=" "><span class="title-number">12 </span><span class="title-name">Using the OBS Web UI</span></a></li><li><a href="cha-obs-best-practices-basics.html" class=" "><span class="title-number">13 </span><span class="title-name">Basic Concepts and Work Styles</span></a></li><li><a href="cha-obs-best-practices-scm-integration.html" class=" "><span class="title-number">14 </span><span class="title-name">How to integrate external SCM sources</span></a></li><li><a href="cha-obs-best-practices-upstream.html" class=" "><span class="title-number">15 </span><span class="title-name">Publishing Upstream Binaries</span></a></li><li><a href="cha-obs-best-practices-bootstrapping.html" class=" "><span class="title-number">16 </span><span class="title-name">Bootstrapping</span></a></li><li><a href="cha-obs-best-practices-oscexamples.html" class=" "><span class="title-number">17 </span><span class="title-name"><code class="command">osc</code> Example Commands</span></a></li><li><a href="cha-obs-best-practices-advanced.html" class=" "><span class="title-number">18 </span><span class="title-name">Advanced Project Setups</span></a></li><li><a href="cha-obs-best-practices-kmp.html" class=" "><span class="title-number">19 </span><span class="title-name">Building Kernel Modules</span></a></li><li><a href="cha-obs-best-practices-howto.html" class=" "><span class="title-number">20 </span><span class="title-name">Common Questions and Solutions</span></a></li></ol></li><li class="active"><a href="par-reference.html" class="has-children you-are-here"><span class="title-number">VI </span><span class="title-name">Reference</span></a><ol><li><a href="cha-obs-architecture.html" class=" "><span class="title-number">21 </span><span class="title-name">OBS Architecture</span></a></li><li><a href="cha-obs-concepts.html" class=" "><span class="title-number">22 </span><span class="title-name">OBS Concepts</span></a></li><li><a href="cha-obs-build-process.html" class=" "><span class="title-number">23 </span><span class="title-name">Build Process</span></a></li><li><a href="cha-obs-build-containers.html" class=" "><span class="title-number">24 </span><span class="title-name">Build Containers</span></a></li><li><a href="cha-obs-source-management.html" class=" "><span class="title-number">25 </span><span class="title-name">Source Management</span></a></li><li><a href="cha-obs-scm-bridge.html" class=" "><span class="title-number">26 </span><span class="title-name">SCM Bridge</span></a></li><li><a href="cha-obs-supported-formats.html" class=" "><span class="title-number">27 </span><span class="title-name">Supported Formats</span></a></li><li><a href="cha-obs-request-and-review-system.html" class=" "><span class="title-number">28 </span><span class="title-name">Request And Review System</span></a></li><li><a href="cha-obs-image-templates.html" class=" "><span class="title-number">29 </span><span class="title-name">Image Templates</span></a></li><li><a href="cha-obs-multibuild.html" class=" "><span class="title-number">30 </span><span class="title-name">Multiple Build Description File Handling</span></a></li><li><a href="cha-obs-maintenance-setup.html" class=" "><span class="title-number">31 </span><span class="title-name">Maintenance Support</span></a></li><li><a href="cha-obs-binary-tracking.html" class=" "><span class="title-number">32 </span><span class="title-name">Binary Package Tracking</span></a></li><li><a href="cha-obs-build-scheduling-and-dispatching.html" class=" "><span class="title-number">33 </span><span class="title-name">Scheduling and Dispatching</span></a></li><li><a href="cha-obs-build-constraints.html" class=" you-are-here"><span class="title-number">34 </span><span class="title-name">Build Constraints</span></a></li><li><a href="cha-obs-build-preinstall.html" class=" "><span class="title-number">35 </span><span class="title-name">Building Preinstall Images</span></a></li><li><a href="cha-obs-authorization-token.html" class=" "><span class="title-number">36 </span><span class="title-name">Authorization</span></a></li><li><a href="cha-obs-qa-hooks.html" class=" "><span class="title-number">37 </span><span class="title-name">Quality Assurance(QA) Hooks</span></a></li></ol></li><li><a href="obs-glossary.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="bk01apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU Licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-obs-build-constraints" data-id-title="Build Constraints"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">34 </span><span class="title-name">Build Constraints</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Build constraints provide a way for the user to specify build worker
  parameters that the Build Service will use to decide which build workers
  are "qualified" to undertake a given build. </p><p> They are intended to be used for defining known, hard requirements
  for successfully building a given package (for example, disk space, memory,
  or certain CPU functionality). </p><section class="sect1" id="id-1.2.10.15.5" data-id-title="Build Resource Usage and Statistics"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">34.1 </span><span class="title-name">Build Resource Usage and Statistics</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.5">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Ideally, the build constraints should be set to the minimum values
   that enable a build to succeed, because any higher setting than the minimum
   might unnecessarily reduce the number of build workers available to build
   the package. </p><p> Now, in the real world, we do not always have a precise idea of what
   the minimum values are for all the different build worker parameters that
   can be controlled using OBS build constraints.  That need not deter us from
   setting build constraints, however. It is not necessary to wait for a build
   failure before setting minimum memory and disk space constraints, for example,
   because the OBS can give us reasonable values for memory and disk space
   based on a successful build. </p><p> Each successful build produces a file called <code class="literal">_statistics</code>
   which can be examined to get details of the resources our build consumed. We
   can then use this information to set appropriate values for the relevant build
   constraints. </p><section class="sect2" id="id-1.2.10.15.5.5" data-id-title="Displaying the build statistics"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.1.1 </span><span class="title-name">Displaying the build statistics</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.5.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The information from the <code class="literal">_statistics</code> file can be
    found in the Build Service web UI, by clicking on the build target we are
    interested in and then clicking on "Show resources". Alternatively, the
    <code class="literal">_statistics</code> file itself can be downloaded from the
    Build Service, either from the command line or using the OBS API.</p><section class="sect3" id="id-1.2.10.15.5.5.3" data-id-title="Downloading the _statistics file using osc"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">34.1.1.1 </span><span class="title-name">Downloading the _statistics file using <code class="command">osc</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.5.5.3">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Since the <code class="literal">_statistics</code> file is a build artifact
     produced by every successful build, it is always included among the build
     artifacts downloaded by <code class="literal">osc getbinaries</code>. </p></section><section class="sect3" id="id-1.2.10.15.5.5.4" data-id-title="Downloading the _statistics file using the OBS API"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">34.1.1.2 </span><span class="title-name">Downloading the _statistics file using the OBS API</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.5.5.4">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> If you are using the OBS API, the relevant call is:</p><div class="verbatim-wrap"><pre class="screen">GET /build/{project_name}/{repository_name}/{architecture_name}/{package_name}/_statistics</pre></div><div id="id-1.2.10.15.5.5.4.4" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
     When reviewing the build statistics, it's important to be aware that the
     numbers can vary significantly from build to build depending on build
     parallelism (e.g. <code class="literal">make -j</code>).
     </p></div></section></section></section><section class="sect1" id="constraint-qualifiers" data-id-title="Constraint Qualifiers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">34.2 </span><span class="title-name">Constraint Qualifiers</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#constraint-qualifiers">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> In general, build constraints are specified in terms of a qualifier
   and a value. The qualifier expresses "what" - the build worker parameter
   that is to be constrained - and the semantics of the value depend on the
   qualifier. If the qualifier takes a numeric value, it generally expresses
   "how much", or, in other words, the minimum value (of that parameter) that a
   given build worker must meet in order to fulfill the constraint. But there
   are some qualifiers, such as <code class="literal">hostlabel</code>, that take a simple
   string value.</p><p> In the simplest cases, the qualifier is just a string. In more
   complicated cases, the qualifier can include subqualifiers and be modified
   by attributes. For example: </p><div class="verbatim-wrap"><pre class="screen">hardware:disk:size unit=G</pre></div><p> The string <code class="literal">hardware:disk:size</code> in this example means
   "size, a subqualifier of disk, which is itself a subqualifier of hardware",
   and <code class="literal">unit=G</code> means "the value is expressed in units of
   Gigabytes. </p><p> For a full treatment of constraint syntax, see
   <a class="xref" href="cha-obs-build-constraints.html#constraint-syntax" title="34.4. Constraint syntax">Section 34.4, “Constraint syntax”</a>. </p></section><section class="sect1" id="id-1.2.10.15.7" data-id-title="Constraint scope and precedence"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">34.3 </span><span class="title-name">Constraint scope and precedence </span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.7">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Depending on the required scope, constraint qualifiers and their
   values can be set at four different levels: instance, project, package, and
   build recipe. Setting constraints at the OBS instance level is up to the
   administrator of the OBS instance and is covered in the OBS Admin Guide.
   Project-wide constraints are defined in the project configuration. Package
   constraints are defined in a special file, <code class="literal">_constraints</code>,
   in the packages sources. It is also possible to insert constraints directly
   in the individual build recipes (RPM spec files, Dockerfiles). </p><p> The constraints that are in force for a particular build are
   determined by merging all constraints defined at all levels: site, project,
   package, and build recipe. The merging is done in that order, with later
   settings overwriting earlier ones. That means, for example, that site-wide
   constraints can be overrided at any of the lower levels (project, package,
   build recipe), project-level constraints can be overrided at the package
   and build recipe levels, etc.</p><section class="sect2" id="id-1.2.10.15.7.4" data-id-title="Project-scoped constraints"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.3.1 </span><span class="title-name">Project-scoped constraints</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.7.4">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Build constraints for an entire project, or for specific repositories
    within it, or for specific architectures within those repositories, are
    defined in the project config by adding lines as so: </p><div class="verbatim-wrap"><pre class="screen">Constraint: &lt;QUALIFIER&gt; &lt;VALUE&gt;</pre></div><p> The QUALIFIER syntax is the same as used in RPM spec files, documented
    in <a class="xref" href="cha-obs-build-constraints.html#constraint-syntax" title="34.4. Constraint syntax">Section 34.4, “Constraint syntax”</a>. Within the project configuration,
    individual <code class="literal">Constraint</code> lines can be enclosed in guards to
    make a constraint apply only to certain architectures or repositories. For
    example:</p><div class="verbatim-wrap"><pre class="screen">%ifarch ppc ppc64 ppc64le
Constraint: hardware:cpu:flag power8
%endif</pre></div><p>or</p><div class="verbatim-wrap"><pre class="screen">%if "%_repository" == "images"
Constraint: hardware:disk:size unit=M 4000
%endif</pre></div><div id="id-1.2.10.15.7.4.8" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p> Constraints set in project configuration affect not only the
     project itself, but also all projects that build against it.</p></div><p> For a full treatment of constraint syntax, see
    <a class="xref" href="cha-obs-build-constraints.html#constraint-syntax" title="34.4. Constraint syntax">Section 34.4, “Constraint syntax”</a>. </p></section><section class="sect2" id="id-1.2.10.15.7.5" data-id-title="Package-scoped constraints"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.3.2 </span><span class="title-name">Package-scoped constraints</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.7.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Setting constraints at the package level is achieved by including
    an XML file called <code class="literal">_constraints</code> in the package sources.
    The Build Service will attempt to validate this file when it is committed
    (from the osc command line) or saved (in the web UI) to prevent invalid XML
    from reaching the Build Service. </p><p> Here is a simple example showing what a <code class="literal">_constraints</code>
    file might look like: </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
&lt;constraints&gt;
  &lt;hardware&gt;
    &lt;physicalmemory&gt;
      &lt;size unit="M"&gt;2000&lt;/size&gt;
    &lt;/physicalmemory&gt;
    &lt;disk&gt;
      &lt;size unit="G"&gt;5&lt;/size&gt;
    &lt;/disk&gt;
  &lt;/hardware&gt;
  &lt;sandbox&gt;kvm&lt;/sandbox&gt;
  &lt;hostlabel exclude="true"&gt;SLOW_CPU&lt;/hostlabel&gt;
&lt;/constraints&gt;</pre></div><p> For details on constraint qualifiers and how to specify them
    in a <code class="literal">_constraints</code> file, see
    <a class="xref" href="cha-obs-build-constraints.html#constraint-syntax" title="34.4. Constraint syntax">Section 34.4, “Constraint syntax”</a>. </p></section><section class="sect2" id="id-1.2.10.15.7.6" data-id-title="Build recipe-scoped constraints"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.3.3 </span><span class="title-name">Build recipe-scoped constraints</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.7.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> At the build recipe level, constraints are set by embedding lines
    containing constraint qualifiers and values directly in RPM spec files or
    Dockerfiles. Such lines take the form </p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: &lt;QUALIFIER&gt; &lt;VALUE&gt;</pre></div><p> The <code class="literal">#</code> character at the beginning of the line
    causes the build recipe parser (RPM, Docker, podman) to ignore the
    whole line, but in combination with the <code class="literal">!</code> character
    signifies an OBS-specific directive that is picked up by a pre-processor
    within the OBS back-end. </p><p> Instead of specifying subqualifiers by nesting
    directives like in XML, colons are used. For example: </p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: linux:version:min 3.0</pre></div><p> In this example, "linux:version:min" is the constraint qualifier and
    "3.0" is the value. </p><p> As described for project-scoped conditionals, above,
    <code class="literal">#!BuildConstraint</code> lines can be guarded with various
    conditionals to limit their effect to certain architectures
    or, e.g., multibuild flavors. </p><div id="id-1.2.10.15.7.6.9" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
    Be careful when setting build constraints. The idea is to use them to
    express minimum values for the various parameters, below which builds
    are likely to fail. If you set a constraint too high, you risk reducing the
    pool of compliant build workers down to a very low number, or even to zero.
    (A low number of compliant build workers means your build may not start for
    a long time, and no compliant workers at all will cause the build to fail.
    See <a class="xref" href="cha-obs-build-constraints.html#constraint-handling" title="34.5. Constraint Handling">Section 34.5, “Constraint Handling”</a> for details.)
    </p></div><div id="id-1.2.10.15.7.6.10" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
    By default, constraints applied to build workers regardless of
    architecture. However, you may only be interested in certain architectures
    and not in others. See <a class="xref" href="cha-obs-build-constraints.html#constraint-checking-with-osc" title="34.6. Checking Constraints with osc">Section 34.6, “Checking Constraints with <code class="command">osc</code>”</a>
    for how to get architecture-specific information on which workers satisfy
    your constraints.
    </p></div></section></section><section class="sect1" id="constraint-syntax" data-id-title="Constraint syntax"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">34.4 </span><span class="title-name">Constraint syntax</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#constraint-syntax">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> This section describes the various constraint qualifiers and their
   syntax. </p><p> In general, it is important to understand that the syntax used will
   differ depending on where the constraints are specified. When specified
   via a <code class="literal">_constraints</code> file, XML syntax is used, while a
   different syntax is used when specifying constraints in a project
   configuration or a build recipe (e.g., an RPM spec file). In this section,
   both syntaxes are described for each qualifier. </p><div id="id-1.2.10.15.8.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
   When specifying constraints using XML syntax, attribute values must be
   enclosed in double-quotes (<code class="literal">unit="G"</code>,
   <code class="literal">exclude="true"</code>, etc.), while in project configurations and
   build recipes the values must be given <span class="emphasis"><em>without</em></span>
   quotes (<code class="literal">unit=G</code>, <code class="literal">exclude=true</code>).
   </p></div><section class="sect2" id="id-1.2.10.15.8.5" data-id-title="hostlabel"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.4.1 </span><span class="title-name"><code class="literal">hostlabel</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The "hostlabel" qualifier is any string which can be assigned to
    build workers when starting the <code class="literal">bs_worker</code> process. Since
    its intended use is to restrict a build to specific workers, it should only
    be used after consultation with OBS administrators who have detailed
    knowledge of the build farm, and ideally as a negative definition, using the
    <code class="literal">exclude=true</code> attribute. Even then, keep in mind that
    <code class="literal">hostlabel</code> settings are not portable, since the always
    specific to a given OBS instance and should therefore only be used as a last
    resort in situations that cannot be addressed by any of the other qualifiers.
    </p><p> An example use case is to run benchmarks in a reproducible way.</p><p> Example for <code class="literal">_constraints</code> file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints exclude="false"&gt;
   &lt;hostlabel&gt;benchmark_runner&lt;/hostlabel&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:  </p><div class="verbatim-wrap"><pre class="screen">Constraint: hostlabel benchmark_runner</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hostlabel benchmark_runner</pre></div></section><section class="sect2" id="id-1.2.10.15.8.6" data-id-title="sandbox"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.4.2 </span><span class="title-name"><code class="literal">sandbox</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Defines the "sandbox" which is used for the build. The "sandbox" is
    the virtual environment in which the build takes place: each build worker
    is configured with a fixed sandbox type. </p><p> The configuration of this build constraint is typically left to
    OBS administrators, and there is usually no reason for a project or package
    maintainer to set it. </p><p> Example for <code class="filename">_constraints</code> file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
   &lt;sandbox exclude="true"&gt;kvm&lt;/sandbox&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: sandbox exclude="true" kvm</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: sandbox exclude="true" kvm</pre></div></section><section class="sect2" id="id-1.2.10.15.8.7" data-id-title="linux"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.4.3 </span><span class="title-name"><code class="literal">linux</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.7">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> This is a category of constraints specific to the Linux kernel,
    applied to the kernel running on the build worker. </p><section class="sect3" id="id-1.2.10.15.8.7.3" data-id-title="version"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">34.4.3.1 </span><span class="title-name">version</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.7.3">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> To require a specific Linux kernel version or version range. </p><p> Example for the <code class="literal">_constraints</code> file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
   &lt;linux&gt;&lt;version&gt;
     &lt;min&gt;3.0&lt;/min&gt;
     &lt;max&gt;4.0&lt;/max&gt;
   &lt;/version&gt;&lt;/linux&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: linux:version:min 3.0
Constraint: linux:version:max 4.0</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: linux:version:min 3.0
#!BuildConstraint: linux:version:max 4.0</pre></div><section class="sect4" id="id-1.2.10.15.8.7.3.9" data-id-title="min"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">34.4.3.1.1 </span><span class="title-name"><code class="literal">min</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.7.3.9">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Minimum kernel version. </p></section><section class="sect4" id="id-1.2.10.15.8.7.3.10" data-id-title="max"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">34.4.3.1.2 </span><span class="title-name"><code class="literal">max</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.7.3.10">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Maximum kernel version. </p></section></section><section class="sect3" id="id-1.2.10.15.8.7.4" data-id-title="flavor"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">34.4.3.2 </span><span class="title-name"><code class="literal">flavor</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.7.4">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> A specific kernel flavor, such as default or smp (corresponding to
     the kernel packages kernel-default and kernel-smp, respectively). </p><p> Example for <code class="literal">_constraints</code> file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
    &lt;linux&gt;
      &lt;flavor&gt;default&lt;/flavor&gt;
    &lt;/linux&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: linux:flavor default</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: linux:flavor default</pre></div></section></section><section class="sect2" id="id-1.2.10.15.8.8" data-id-title="hardware"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.4.4 </span><span class="title-name"><code class="literal">hardware</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> To specify that build workers must meet certain minimum hardware
    specifications or possess certain hardware features. </p><section class="sect3" id="id-1.2.10.15.8.8.3" data-id-title="cpu"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">34.4.4.1 </span><span class="title-name"><code class="literal">cpu</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8.3">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> To require a specific CPU feature. </p><section class="sect4" id="id-1.2.10.15.8.8.3.3" data-id-title="flag"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">34.4.4.1.1 </span><span class="title-name"><code class="literal">flag</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8.3.3">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> CPU features which are provided by the hardware. On Linux, these can
      be found in <code class="literal">/proc/cpuinfo</code>. The flag element may be
      used multiple times to require multiple CPU features. </p><p> Example for <code class="literal">_constraints</code> file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
   &lt;hardware&gt;&lt;cpu&gt;
     &lt;flag&gt;mmx&lt;/flag&gt;
     &lt;flag&gt;sse2&lt;/flag&gt;
   &lt;/cpu&gt;&lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p> Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:cpu:flag mmx
Constraint: hardware:cpu:flag sse2</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:cpu:flag mmx
#!BuildConstraint: hardware:cpu:flag sse2</pre></div><p><code class="literal">EL0</code> is a special flag that that can be used on
       hardware that only supports level-0 exceptions, such as certain armv8l
       systems. This means that VMs or 32-bit kernels are not supported but
       userland is supported. This flag can be used to block builds on such
       hardware if no 64-bit kernel is available for a project. </p><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:cpu:flag exclude=true EL0</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:cpu:flag exclude=true EL0</pre></div><p>
       Additional flags are also reported for effective architecture level of
       the CPU. This includes the following flags:
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>power7</p></li><li class="listitem"><p>power8</p></li><li class="listitem"><p>power9</p></li><li class="listitem"><p>x86-64-v2</p></li><li class="listitem"><p>x86-64-v3</p></li><li class="listitem"><p>x86-64-v4</p></li></ul></div></section></section><section class="sect3" id="id-1.2.10.15.8.8.4" data-id-title="processors"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">34.4.4.2 </span><span class="title-name"><code class="literal">processors</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8.4">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>To specify a minimum number of processor cores, virtual or physical
     (i.e., as reported by <code class="literal">/proc/cpuinfo</code>, provided by the build
     worker and usable for the build</p><p> Example for <code class="literal">_constraints</code> file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
   &lt;hardware&gt;
     &lt;processors&gt;4&lt;/processors&gt;
   &lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:processors 4</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:processors 4</pre></div></section><section class="sect3" id="id-1.2.10.15.8.8.5" data-id-title="jobs"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">34.4.4.3 </span><span class="title-name"><code class="literal">jobs</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8.5">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Each build worker is configured with a given default for the
     <code class="literal">JOBS</code> environment variable, which expresses how many parallel
     build processes the worker should be able to sustain. To require a minimal
     number of pre-confiured parallel jobs for the build, use this qualifier.
     </p><div id="id-1.2.10.15.8.8.5.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
     This specifies the number of parallel jobs the build tooling should use, so
     even though it is under <code class="literal">hardware</code> it is not actually a
     hardware requirement.
     </p></div><p> Example for <code class="literal">_constraints</code> file: </p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
   &lt;hardware&gt;
     &lt;jobs&gt;4&lt;/jobs&gt;
   &lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:jobs 4</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:jobs 4</pre></div></section><section class="sect3" id="id-1.2.10.15.8.8.6" data-id-title="disk"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">34.4.4.4 </span><span class="title-name"><code class="literal">disk</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8.6">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Hard disk specific constraints. </p><section class="sect4" id="id-1.2.10.15.8.8.6.3" data-id-title="size"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">34.4.4.4.1 </span><span class="title-name"><code class="literal">size</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8.6.3">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> To specify a minimum amount of free disk space, below which a build
      on the worker will not be attempted. </p><p> Example for <code class="literal">_constraints</code> file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
  &lt;hardware&gt;
     &lt;disk&gt;
       &lt;size unit="G"&gt;4&lt;/size&gt;
     &lt;/disk&gt;
  &lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:disk:size unit=G 4</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:disk:size unit=G 4</pre></div></section></section><section class="sect3" id="id-1.2.10.15.8.8.7" data-id-title="memory"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">34.4.4.5 </span><span class="title-name"><code class="literal">memory</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8.7">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> To specify a minimum amount of RAM memory that the worker must be
     equipped with. </p><section class="sect4" id="id-1.2.10.15.8.8.7.3" data-id-title="size"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">34.4.4.5.1 </span><span class="title-name"><code class="literal">size</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8.7.3">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> To require a minimum memory size,
      <span class="emphasis"><em>including swap space</em></span>. </p><p> Example for <code class="literal">_constraints</code> file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
   &lt;hardware&gt;
     &lt;memory&gt;
       &lt;size unit="M"&gt;1400&lt;/size&gt;
     &lt;/memory&gt;
   &lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p> Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:memory:size unit=M 1400</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:memory:size unit=M 1400</pre></div></section></section><section class="sect3" id="id-1.2.10.15.8.8.8" data-id-title="physicalmemory"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">34.4.4.6 </span><span class="title-name"><code class="literal">physicalmemory</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8.8">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Memory specific. </p><section class="sect4" id="id-1.2.10.15.8.8.8.3" data-id-title="size"><div class="titlepage"><div><div><div class="title-container"><h5 class="title"><span class="title-number-name"><span class="title-number">34.4.4.6.1 </span><span class="title-name"><code class="literal">size</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.8.8.8.3">#</a></h5><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> To require a minimal memory size. Swap space is not taken into
      account here. </p><p> Example for _constraints file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
   &lt;hardware&gt;
     &lt;physicalmemory&gt;
       &lt;size unit="M"&gt;1400&lt;/size&gt;
     &lt;/physicalmemory&gt;
   &lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration: </p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:physicalmemory:size unit=M 1400</pre></div><p>Example for RPM spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:physicalmemory:size unit=M 1400</pre></div></section></section></section></section><section class="sect1" id="constraint-handling" data-id-title="Constraint Handling"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">34.5 </span><span class="title-name">Constraint Handling</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#constraint-handling">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> What happens when someone sets a constraint so high, that the OBS
   instance does not have even a single worker that meets it? What happens
   when just a few workers satisfy all the constraints, but all of them are
   busy building packages, or have been taken down for maintenance? This
   section describes how the OBS handles these "low compliant worker"
   situations. </p><section class="sect2" id="id-1.2.10.15.9.3" data-id-title="At least one compliant worker is available"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.5.1 </span><span class="title-name">At least one compliant worker is available</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.9.3">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> After determining which build workers satisfy the defined
    constraints for a given build, the scheduler checks if any of them are
    available to start building. If at least one is available, the build
    begins. The rest of this section describes the OBS's behavior when no
    compliant build workers are free to start building a given package. </p></section><section class="sect2" id="id-1.2.10.15.9.4" data-id-title="More than half of existing workers satisfy the constraints"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.5.2 </span><span class="title-name">More than half of existing workers satisfy the constraints</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.9.4">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The build will stay in state "scheduled" until one of the compliant
    workers becomes available. No further notification is set. </p></section><section class="sect2" id="id-1.2.10.15.9.5" data-id-title="Less than half of existing workers satisfy the constraints"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.5.3 </span><span class="title-name">Less than half of existing workers satisfy the constraints</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.9.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The build will stay in state scheduled until one of the compliant
    workers becomes available. In addition, the dispatch details are set
    to tell the user that this build might take a long time to complete.
    The notification looks like this:</p><div class="verbatim-wrap"><pre class="screen">waiting for 4 compliant workers (4 down)</pre></div><p>In this case, all four compliant workers are down. The notification
    helps the user understand why the build is not starting. The dispatch
    details can also be retrieved using the OBS API or, e.g., using the command
    <code class="literal">osc results -v</code>).</p></section><section class="sect2" id="id-1.2.10.15.9.6" data-id-title="No existing workers satisfy the constraints"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">34.5.4 </span><span class="title-name">No existing workers satisfy the constraints</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#id-1.2.10.15.9.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> If no worker can handle the constraints defined by the package or
    project, the build fails. In such cases, the build log will mention why
    the build failed: </p><div class="verbatim-wrap"><pre class="screen">package build was not possible:

no compliant workers (constraints mismatch hint: hardware:processors sandbox)

Please adapt your constraints.</pre></div></section></section><section class="sect1" id="constraint-checking-with-osc" data-id-title="Checking Constraints with osc"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">34.6 </span><span class="title-name">Checking Constraints with <code class="command">osc</code></span></span> <a title="Permalink" class="permalink" href="cha-obs-build-constraints.html#constraint-checking-with-osc">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> You can check the constraints of a project or package with the osc
   tool. You have to be in an <code class="command">osc</code> working directory.</p><div class="verbatim-wrap"><pre class="screen"><code class="command">osc checkconstraints [OPTS] [REPOSITORY] [ARCH] [CONSTRAINTSFILE]</code></pre></div><p>Either you give a repository and an arch or osc will check the constraints
   for all repository / arch pairs for the package. A few examples:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc checkconstraints</code>
Repository                Arch                      Worker
----------                ----                      ------
openSUSE_Leap_42.2        x86_64                    1
openSUSE_Leap_42.1        x86_64                    1</pre></div><p>If no file is given it takes the local _constraints file. If this file does
   not exist or the --ignore-file switch is set only the project constraints
   are used.</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc checkconstraints openSUSE_Leap_42.1 x86_64</code>
Worker
------
x86_64:worker:1
x86_64:worker:2</pre></div><p>If a repository and an arch is given a list of compliant workers is
   returned. </p><p> Another command to verify a worker and display the worker information
   is <code class="literal">osc workerinfo</code>. </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc workerinfo x86_64:worker:1</code>
&lt;worker hostarch="x86_64" registerserver="http://localhost:5252" workerid="worker:1"&gt;
  &lt;hostlabel&gt;MY_WORKER_LABEL_1&lt;/hostlabel&gt;
  &lt;sandbox&gt;chroot&lt;/sandbox&gt;
  &lt;linux&gt;
    &lt;version&gt;4.1.34-33&lt;/version&gt;
    &lt;flavor&gt;default&lt;/flavor&gt;
  &lt;/linux&gt;
  &lt;hardware&gt;
    &lt;cpu&gt;
      &lt;flag&gt;fpu&lt;/flag&gt;
      &lt;flag&gt;vme&lt;/flag&gt;
      &lt;flag&gt;de&lt;/flag&gt;
    &lt;/cpu&gt;
    &lt;processors&gt;2&lt;/processors&gt;
    &lt;jobs&gt;1&lt;/jobs&gt;
  &lt;/hardware&gt;
&lt;/worker&gt;</pre></div><p> It returns the information of the desired worker. </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-obs-build-scheduling-and-dispatching.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 33 </span>Scheduling and Dispatching</span></a> </div><div><a class="pagination-link next" href="cha-obs-build-preinstall.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 35 </span>Building Preinstall Images</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-obs-build-constraints.html#id-1.2.10.15.5"><span class="title-number">34.1 </span><span class="title-name">Build Resource Usage and Statistics</span></a></span></li><li><span class="sect1"><a href="cha-obs-build-constraints.html#constraint-qualifiers"><span class="title-number">34.2 </span><span class="title-name">Constraint Qualifiers</span></a></span></li><li><span class="sect1"><a href="cha-obs-build-constraints.html#id-1.2.10.15.7"><span class="title-number">34.3 </span><span class="title-name">Constraint scope and precedence </span></a></span></li><li><span class="sect1"><a href="cha-obs-build-constraints.html#constraint-syntax"><span class="title-number">34.4 </span><span class="title-name">Constraint syntax</span></a></span></li><li><span class="sect1"><a href="cha-obs-build-constraints.html#constraint-handling"><span class="title-number">34.5 </span><span class="title-name">Constraint Handling</span></a></span></li><li><span class="sect1"><a href="cha-obs-build-constraints.html#constraint-checking-with-osc"><span class="title-number">34.6 </span><span class="title-name">Checking Constraints with <code class="command">osc</code></span></a></span></li></ul></div> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>User Guide | Using Source Services</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Using Source Services"/>
<meta name="description" content="Source Services are tools to validate, generate or modify sources in a trustable way. They are designed as smallest possible tools and can be combine…"/>
<meta name="book-title" content="User Guide"/>
<meta name="chapter-title" content="Chapter 7. Using Source Services"/>
<meta name="tracker-url" content="https://github.com/SUSE/obs-docu/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Using Source Services"/>
<meta property="og:description" content="Source Services are tools to validate, generate or modify s…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Using Source Services"/>
<meta name="twitter:description" content="Source Services are tools to validate, generate or modify s…"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Product &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Using Source Services",
  
    "description": "Using Source Services",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha.obs.building.html" title="Chapter 6. Local Building"/><link rel="next" href="cha.obs.scm_ci_workflow_integration.html" title="Chapter 8. SCM/CI Workflow Integration"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="wide offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">User Guide</a><span> / </span><a class="crumb" href="par.working.html">Usage</a><span> / </span><a class="crumb" href="cha.obs.source_service.html">Using Source Services</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">User Guide</div><ol><li><a href="bk01pr01.html" class=" "><span class="title-number"> </span><span class="title-name">About this Guide</span></a></li><li><a href="par.first_steps.html" class="has-children "><span class="title-number">I </span><span class="title-name">First Steps</span></a><ol><li><a href="art.obs.bg.html" class=" "><span class="title-number">1 </span><span class="title-name">Beginnerʼs Guide</span></a></li></ol></li><li><a href="par.concepts.html" class="has-children "><span class="title-number">II </span><span class="title-name">Concepts</span></a><ol><li><a href="cha.obs.package_formats.html" class=" "><span class="title-number">2 </span><span class="title-name">Supported Build Recipes and Package Formats</span></a></li></ol></li><li><a href="bk01pt03.html" class="has-children "><span class="title-number">III </span><span class="title-name">Setup</span></a><ol><li><a href="cha.obs.osc.html" class=" "><span class="title-number">3 </span><span class="title-name">osc, the Command Line Tool</span></a></li><li><a href="cha.obs.prjconfig.html" class=" "><span class="title-number">4 </span><span class="title-name">Build Configuration</span></a></li></ol></li><li class="active"><a href="par.working.html" class="has-children you-are-here"><span class="title-number">IV </span><span class="title-name">Usage</span></a><ol><li><a href="cha.obs.basicworkflow.html" class=" "><span class="title-number">5 </span><span class="title-name">Basic OBS Workflow</span></a></li><li><a href="cha.obs.building.html" class=" "><span class="title-number">6 </span><span class="title-name">Local Building</span></a></li><li><a href="cha.obs.source_service.html" class=" you-are-here"><span class="title-number">7 </span><span class="title-name">Using Source Services</span></a></li><li><a href="cha.obs.scm_ci_workflow_integration.html" class=" "><span class="title-number">8 </span><span class="title-name">SCM/CI Workflow Integration</span></a></li><li><a href="cha.obs.stagingworkflow.html" class=" "><span class="title-number">9 </span><span class="title-name">Staging Workflow</span></a></li><li><a href="cha.obs.notifications.html" class=" "><span class="title-number">10 </span><span class="title-name">Notifications</span></a></li><li><a href="cha.obs.moderation.html" class=" "><span class="title-number">11 </span><span class="title-name">Moderation</span></a></li></ol></li><li><a href="par.best_practices.html" class="has-children "><span class="title-number">V </span><span class="title-name">Best Practices</span></a><ol><li><a href="cha.obs.best-practices.webuiusage.html" class=" "><span class="title-number">12 </span><span class="title-name">Using the OBS Web UI</span></a></li><li><a href="cha.obs.best-practices.basics.html" class=" "><span class="title-number">13 </span><span class="title-name">Basic Concepts and Work Styles</span></a></li><li><a href="cha.obs.best-practices.scm_integration.html" class=" "><span class="title-number">14 </span><span class="title-name">How to integrate external SCM sources</span></a></li><li><a href="cha.obs.best-practices.upstream.html" class=" "><span class="title-number">15 </span><span class="title-name">Publishing Upstream Binaries</span></a></li><li><a href="cha.obs.best-practices.bootstrapping.html" class=" "><span class="title-number">16 </span><span class="title-name">Bootstrapping</span></a></li><li><a href="cha.obs.best-practices.oscexamples.html" class=" "><span class="title-number">17 </span><span class="title-name"><code class="command">osc</code> Example Commands</span></a></li><li><a href="cha.obs.best-practices.advanced.html" class=" "><span class="title-number">18 </span><span class="title-name">Advanced Project Setups</span></a></li><li><a href="cha.obs.best-practices.kmp.html" class=" "><span class="title-number">19 </span><span class="title-name">Building Kernel Modules</span></a></li><li><a href="cha.obs.best-practices.howto.html" class=" "><span class="title-number">20 </span><span class="title-name">Common Questions and Solutions</span></a></li></ol></li><li><a href="par.reference.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Reference</span></a><ol><li><a href="cha.obs.architecture.html" class=" "><span class="title-number">21 </span><span class="title-name">OBS Architecture</span></a></li><li><a href="cha.obs.concepts.html" class=" "><span class="title-number">22 </span><span class="title-name">OBS Concepts</span></a></li><li><a href="cha.obs.build_process.html" class=" "><span class="title-number">23 </span><span class="title-name">Build Process</span></a></li><li><a href="cha.obs.build_containers.html" class=" "><span class="title-number">24 </span><span class="title-name">Build Containers</span></a></li><li><a href="cha.obs.source_management.html" class=" "><span class="title-number">25 </span><span class="title-name">Source Management</span></a></li><li><a href="cha.obs.scm_bridge.html" class=" "><span class="title-number">26 </span><span class="title-name">SCM Bridge</span></a></li><li><a href="cha.obs.supported_formats.html" class=" "><span class="title-number">27 </span><span class="title-name">Supported Formats</span></a></li><li><a href="cha.obs.request_and_review_system.html" class=" "><span class="title-number">28 </span><span class="title-name">Request And Review System</span></a></li><li><a href="cha.obs.image_templates.html" class=" "><span class="title-number">29 </span><span class="title-name">Image Templates</span></a></li><li><a href="cha.obs.multibuild.html" class=" "><span class="title-number">30 </span><span class="title-name">Multiple Build Description File Handling</span></a></li><li><a href="cha.obs.maintenance_setup.html" class=" "><span class="title-number">31 </span><span class="title-name">Maintenance Support</span></a></li><li><a href="cha.obs.binary_tracking.html" class=" "><span class="title-number">32 </span><span class="title-name">Binary Package Tracking</span></a></li><li><a href="cha.obs.admin.html" class=" "><span class="title-number">33 </span><span class="title-name">Administration</span></a></li><li><a href="cha.obs.build_scheduling_and_dispatching.html" class=" "><span class="title-number">34 </span><span class="title-name">Scheduling and Dispatching</span></a></li><li><a href="cha.obs.build_constraints.html" class=" "><span class="title-number">35 </span><span class="title-name">Build Constraints</span></a></li><li><a href="cha.obs.build_preinstall.html" class=" "><span class="title-number">36 </span><span class="title-name">Building Preinstall Images</span></a></li><li><a href="cha.obs.authorization.token.html" class=" "><span class="title-number">37 </span><span class="title-name">Authorization</span></a></li><li><a href="cha.obs.qa_hooks.html" class=" "><span class="title-number">38 </span><span class="title-name">Quality Assurance(QA) Hooks</span></a></li><li><a href="cha.obs.factory.html" class=" "><span class="title-number">39 </span><span class="title-name">openSUSE Factory</span></a></li></ol></li><li><a href="obs.glossary.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="bk01apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU Licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha.obs.source_service" data-id-title="Using Source Services"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">7 </span><span class="title-name">Using Source Services</span></span> <a title="Permalink" class="permalink" href="cha.obs.source_service.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><section class="sect1" id="sec.obs.sserv.about" data-id-title="About Source Service"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.1 </span><span class="title-name">About Source Service</span></span> <a title="Permalink" class="permalink" href="cha.obs.source_service.html#sec.obs.sserv.about">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
   Source Services are tools to validate, generate or modify sources in a
   trustable way. They are designed as smallest possible tools and can be
   combined following the powerful idea of the classic UNIX design.
  </p><p>
   Source services allow:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Server side generated files are easy to identify and are not
     modifiable by the user. This way other user can trust them to be
     generated in the documented way without modifications.
    </p></li><li class="listitem"><p>
     Generated files never create merge conflicts.
    </p></li><li class="listitem"><p>
     Generated files are a separate commit to the user change.
    </p></li><li class="listitem"><p>
     Services are runnable at any time without user commit.
    </p></li><li class="listitem"><p>
     Services are runnable on server and client side in the same way.
    </p></li><li class="listitem"><p>
     Services are safe. A source checkout and service run never harms
     the system of a user.
    </p></li><li class="listitem"><p>
     Services avoid unnecessary commits.
     This means there are no time-dependent changes. In case the package
     already contains the same file, the newly generated file are dropped.
    </p></li><li class="listitem"><p>
     Services running local or inside the build environment can get created,
     added and used by everybody.
    </p></li><li class="listitem"><p>
     Services running in default or server side mode must be installed by
     the administrator of the OBS server.
    </p></li><li class="listitem"><p>
     The use of a service can be defined per package or project wide.
    </p></li></ul></div><p>
   For using source services you need (refer to <a class="xref" href="cha.obs.source_service.html#ex.obs.sserv.struct" title="Structure of a _service File">Example 7.1, “Structure of a <code class="filename">_service</code> File”</a>):
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     An XML file named <code class="filename">_service</code>.
    </p></li><li class="listitem"><p>
     A root element <code class="sgmltag-element">services</code>.
    </p></li><li class="listitem"><p>
     A <code class="sgmltag-element">service</code> element which uses the specific service with
     optional parameters.
    </p></li></ul></div><div class="example" id="ex.obs.sserv.struct" data-id-title="Structure of a _service File"><div class="title-container"><div class="example-title-wrap"><div class="example-title"><span class="title-number-name"><span class="title-number">Example 7.1: </span><span class="title-name">Structure of a <code class="filename">_service</code> File </span></span><a title="Permalink" class="permalink" href="cha.obs.source_service.html#ex.obs.sserv.struct">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div><div class="example-contents"><div class="verbatim-wrap highlight xml"><pre class="screen">&lt;services&gt; <span class="callout" id="co.obs.sserv.struct.services">1</span>
 &lt;service name="<em class="replaceable">MY_SCRIPT</em>"<span class="callout" id="co.obs.sserv.struct.name">2</span> mode="<em class="replaceable">MODE</em>"<span class="callout" id="co.obs.sserv.struct.mode">3</span>&gt;
  &lt;param name="<em class="replaceable">PARAMETER1</em>"&gt;<em class="replaceable">PARAMETER1_VALUE</em>&lt;/param&gt;<span class="callout" id="co.obs.sserv.struct.param">4</span>
 &lt;/service&gt;
&lt;/services&gt;</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co.obs.sserv.struct.services"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The root element of a <code class="filename">_service</code> file.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co.obs.sserv.struct.name"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      The service name. The service is a script that is stored in the
      <code class="filename">/usr/lib/obs/service</code> directory.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co.obs.sserv.struct.mode"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      Mode of the service, see <a class="xref" href="cha.obs.source_service.html#sec.obs.sserv.mode" title="7.2. Modes of Services">Section 7.2, “Modes of Services”</a>.
     </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co.obs.sserv.struct.param"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
      One or more parameters which are passed to the script defined in
      <a class="xref" href="cha.obs.source_service.html#co.obs.sserv.struct.name"><span class="callout">2</span></a>.
     </p></td></tr></table></div></div></div><p>
   The example above will execute the script:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">/usr/lib/obs/service/<em class="replaceable">MY_SCRIPT</em></code> --<em class="replaceable">PARAMETER1</em> <em class="replaceable">PARAMETER1_VALUE</em> --outdir <em class="replaceable">DIR</em></pre></div></section><section class="sect1" id="sec.obs.sserv.mode" data-id-title="Modes of Services"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.2 </span><span class="title-name">Modes of Services</span></span> <a title="Permalink" class="permalink" href="cha.obs.source_service.html#sec.obs.sserv.mode">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Each service can be used in a mode defining when it should run
   and how to use the result. This can be done per package or globally for an
   entire project. </p><div class="table" id="id-1.2.8.4.4.3" data-id-title="Service Modes"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 7.1: </span><span class="title-name">Service Modes </span></span><a title="Permalink" class="permalink" href="cha.obs.source_service.html#id-1.2.8.4.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Mode</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Runs remotely</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Runs locally</th><th style="border-bottom: 1px solid ; ">Added File Handling</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Default</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">After each commit</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Before local build</td><td style="border-bottom: 1px solid ; ">Generated files are prefixed with <code class="filename">_service:</code></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">trylocal</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Yes</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Yes</td><td style="border-bottom: 1px solid ; ">Changes are merged into commit</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">localonly</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">No</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Yes</td><td style="border-bottom: 1px solid ; ">Changes are merged into commit</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">serveronly</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Yes</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">No</td><td style="border-bottom: 1px solid ; ">Generated files are prefixed with <code class="filename">_service:</code>
        This can be useful, when the service is not available or can not
        work on developer workstations.
      </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">buildtime</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">During each build before calling the build tool (for example, rpm-build)<a href="#ftn.fn.obs.sserv.mode.buildtime" class="footnote"><sup class="footnote" id="fn.obs.sserv.mode.buildtime">[a]</sup></a>The service package must be available for building.</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; "> </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">manual</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">No</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Only via explicit CLI call</td><td style="border-bottom: 1px solid ; ">Exists since OBS 2.11</td></tr><tr><td style="border-right: 1px solid ; "><code class="literal">disabled</code></td><td style="border-right: 1px solid ; ">No</td><td style="border-right: 1px solid ; ">Only via explicit CLI call</td><td> </td></tr></tbody><tbody class="footnotes"><tr><td colspan="4"><div id="ftn.fn.obs.sserv.mode.buildtime" class="footnote"><p><a href="#fn.obs.sserv.mode.buildtime" class="para"><sup class="para">[a] </sup></a>
        A side effect is that the service package is becoming a build
        dependency and must be available.
       </p></div></td></tr></tbody></table></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.2.8.4.4.4.1"><span class="term">Default Mode</span></dt><dd><p>
      The default mode of a service is to always run after each commit on
      the server side and locally before every local build.
     </p></dd><dt id="id-1.2.8.4.4.4.2"><span class="term"><code class="literal">trylocal</code> Mode</span></dt><dd><p>
      This mode is running the service locally. The result is committed
      as standard files and not named with a <code class="literal">_service:</code>
      prefix. Additionally, the service runs on the server by
      default. Usually the service should detect that the result is the same
      and skip the generated files. In case they differ, they are generated
      and added on the server.
     </p></dd><dt id="id-1.2.8.4.4.4.3"><span class="term"><code class="literal">localonly</code> Mode</span></dt><dd><p>
      This mode is running the service locally. The result gets committed
      as standard files and not named  with <code class="literal">_service:</code> prefix.
      The service is never running on the server side. It is also not
      possible to trigger it manually.
     </p></dd><dt id="id-1.2.8.4.4.4.4"><span class="term"><code class="literal">serveronly</code> Mode</span></dt><dd><p>
      The serveronly mode is running the service on the server only. This
      can be useful, when the service is not available or can not work on
      developer workstations.
     </p></dd><dt id="id-1.2.8.4.4.4.5"><span class="term"><code class="literal">buildtime</code> Mode</span></dt><dd><p>
      The service is running inside of the build job, both for local and
      server side builds. A side effect is that the service package is
      becoming a build dependency and must be available. Every user can
      provide and use a service this way in their projects. The generated
      sources are not part of the source repository, but part of the
      generated source packages.
      Note that services requiring external network access are likely to
      fail in this mode, because such access is not available if the build
      workers are running in secure mode<span class="phrase"> (as is always the case at <a class="link" href="https://build.opensuse.org" target="_blank">https://build.opensuse.org</a>)</span>.
     </p></dd><dt id="id-1.2.8.4.4.4.6"><span class="term"><code class="literal">manual</code> Mode, </span><span class="term"><code class="literal">disabled</code> Mode</span></dt><dd><p>
      The manual mode is neither running the service locally nor on the
      server side by default. It can be used to temporarily disable the service but keeping
      the definition as part of the service definition. Or it can be used to
      define the way how to generate the sources and doing so by manually calling
      <code class="command">osc service rundisabled</code>.
      The result will get committed as standard files again.
      NOTE: it did only exist as "disabled" before OBS 2.11, but "manual" is the better
            matching alias name for its usage. The osc client may do have different
            behaviour in future between manual and disabled.
     </p></dd></dl></div></section><section class="sect1" id="sec.obs.sserv.validate" data-id-title="Defining Services for Validation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.3 </span><span class="title-name">Defining Services for Validation</span></span> <a title="Permalink" class="permalink" href="cha.obs.source_service.html#sec.obs.sserv.validate">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
   Source Services can be used to validate sources. This can be defined
   at different levels:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="formalpara-title">Per Package. </span>
      Useful when the packager wants to validate whether the downloaded
      sources are really from the original maintainer.
     </p></li><li class="listitem"><p><span class="formalpara-title">Per Project. </span>
      Useful for applying project-wide policies which cannot be skipped for
      any package.
     </p></li></ul></div><p>
   You can validate sources using either of two methods:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     By comparing checksums and metadata of the files in your repository
     with checksums and metadata as recorded by the maintainer.
    </p></li><li class="listitem"><p>
     Alternatively, you can download the sources from a trusted location
     again and verify that they did not change.
    </p></li></ul></div></section><section class="sect1" id="sec.obs.sserv.create" data-id-title="Creating Source Service Definitions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.4 </span><span class="title-name">Creating Source Service Definitions</span></span> <a title="Permalink" class="permalink" href="cha.obs.source_service.html#sec.obs.sserv.create">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
   Source services are defined in the <code class="filename">_service</code> file
   and are either part of the package sources or used project-wide.
   Project-wide services are stored under the <code class="uri">_project</code> package
   in file <code class="filename">_service</code>.
  </p><p> The <code class="filename">_service</code> file contains a list of services
   which get called in the listed order. Each service can define a list of
   parameters and a mode.
   The project wide services get called after the per package defined
   services.
   </p><p>
   The <code class="filename">_service</code> file is in XML format and looks like this:
  </p><div class="verbatim-wrap highlight xml"><pre class="screen">&lt;services&gt;
  &lt;service name="download_files" mode="trylocal" /&gt;
  &lt;service name="verify_file"&gt;
    &lt;param name="file"&gt;krabber-1.0.tar.gz&lt;/param&gt;
    &lt;param name="verifier"&gt;sha256&lt;/param&gt;
    &lt;param name="checksum"&gt;7f535a96a834b31ba2201a90c4d365990785dead92be02d4cf846713be938b78&lt;/param&gt;
  &lt;/service&gt;
&lt;/services&gt;</pre></div><p>
   With the example above, the services above are executed in the
   following order:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
     Downloads the file via the <code class="systemitem">download_files</code>
     service using the URL from the Spec file.
     When using osc, the downloaded file gets committed as part of the commit.
    </p></li><li class="listitem"><p>
     Compares the downloaded file (<code class="filename">krabber-1.0.tar.gz</code>)
     against the SHA256 checksum.
    </p></li></ol></div></section><section class="sect1" id="sec.obs.sserv.remove" data-id-title="Removing a Source Service"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.5 </span><span class="title-name">Removing a Source Service</span></span> <a title="Permalink" class="permalink" href="cha.obs.source_service.html#sec.obs.sserv.remove">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Sometimes it is useful to continue working on generated files
   manually. In this situation the <code class="filename">_service</code> file needs
   to be dropped, but all
   generated files need to be committed as standard files. The OBS
   provides the <code class="command">mergeservice</code> command for this. It can
   also be used via <code class="command">osc</code> by calling
    <code class="command">osc service merge</code>. </p></section><section class="sect1" id="sec.obs.sserv.token_usage" data-id-title="Trigger a service run via a webhook"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.6 </span><span class="title-name">Trigger a service run via a webhook</span></span> <a title="Permalink" class="permalink" href="cha.obs.source_service.html#sec.obs.sserv.token_usage">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>You may want to update sources in Open Build Service whenever they change in a SCM
        system. You can create a token which allows to trigger a specific
        package update and use it via a webhook. It is recommended to create
        a token for a specific package and not a wildcard token.
        Read <a class="xref" href="cha.obs.authorization.token.html" title="Chapter 37. Authorization">Chapter 37, <em>Authorization</em></a> to learn how to
        create a token.
  </p><section class="sect2" id="sec.obs.sserv.gitlab" data-id-title="Using it on gitlab"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.6.1 </span><span class="title-name">Using it on gitlab</span></span> <a title="Permalink" class="permalink" href="cha.obs.source_service.html#sec.obs.sserv.gitlab">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
           Go to your repository settings page in your gitlab instance. Select Integrations
           there. All what you need to fill is the URL
   </p><div class="verbatim-wrap"><pre class="screen">https://<em class="replaceable">YOUR_INSTANCE</em>/trigger/runservice</pre></div><p>
           and the Secret Token. Hit the <span class="guimenu">Add webhook</span> button and you are good.
           You may specify project and package via CGI parameters in case you created a
           wildcard token:
  </p><div class="verbatim-wrap"><pre class="screen">https://<em class="replaceable">YOUR_INSTANCE</em>/trigger/runservice?project=<em class="replaceable">PROJECT</em>&amp;package=<em class="replaceable">PACKAGE</em></pre></div></section><section class="sect2" id="sec.obs.sserv.github.com" data-id-title="Using it on github.com"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.6.2 </span><span class="title-name">Using it on github.com</span></span> <a title="Permalink" class="permalink" href="cha.obs.source_service.html#sec.obs.sserv.github.com">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
      Go to your repository settings page of your repository on github.com. Select Webhooks
      settings and create a hook via <span class="guimenu">Add Webhook</span> button. Define the payload
      URL as
   </p><div class="verbatim-wrap"><pre class="screen">https://<em class="replaceable">YOUR_INSTANCE</em>/trigger/webhook?id=$TOKEN_ID</pre></div><p>
      and fill the secret box with your token string. Please note that github requires that you
      must also define the token id as part of the webhook string. All other settings can stay
      untouched and just hit the <span class="guimenu">Add webhook</span> button.
   </p></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha.obs.building.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 6 </span>Local Building</span></a> </div><div><a class="pagination-link next" href="cha.obs.scm_ci_workflow_integration.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 8 </span>SCM/CI Workflow Integration</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha.obs.source_service.html#sec.obs.sserv.about"><span class="title-number">7.1 </span><span class="title-name">About Source Service</span></a></span></li><li><span class="sect1"><a href="cha.obs.source_service.html#sec.obs.sserv.mode"><span class="title-number">7.2 </span><span class="title-name">Modes of Services</span></a></span></li><li><span class="sect1"><a href="cha.obs.source_service.html#sec.obs.sserv.validate"><span class="title-number">7.3 </span><span class="title-name">Defining Services for Validation</span></a></span></li><li><span class="sect1"><a href="cha.obs.source_service.html#sec.obs.sserv.create"><span class="title-number">7.4 </span><span class="title-name">Creating Source Service Definitions</span></a></span></li><li><span class="sect1"><a href="cha.obs.source_service.html#sec.obs.sserv.remove"><span class="title-number">7.5 </span><span class="title-name">Removing a Source Service</span></a></span></li><li><span class="sect1"><a href="cha.obs.source_service.html#sec.obs.sserv.token_usage"><span class="title-number">7.6 </span><span class="title-name">Trigger a service run via a webhook</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>
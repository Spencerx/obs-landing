<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>User Guide | Build Process</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Build Process"/>
<meta name="description" content="The build process creates new binaries from sources, binaries, and config. This process may run on the OBS server side or on a local workstation. Eac…"/>
<meta name="book-title" content="User Guide"/>
<meta name="chapter-title" content="Chapter 23. Build Process"/>
<meta name="tracker-url" content="https://github.com/openSUSE/obs-docu/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Build Process"/>
<meta property="og:description" content="The build process creates new binaries from sources, binari…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Build Process"/>
<meta name="twitter:description" content="The build process creates new binaries from sources, binari…"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Product &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Build Process",
  
    "description": "Build Process",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha.obs.concepts.html" title="Chapter 22. OBS Concepts"/><link rel="next" href="cha.obs.build_containers.html" title="Chapter 24. Build Containers"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="wide offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"/></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">User Guide</a><span> / </span><a class="crumb" href="par.reference.html">Reference</a><span> / </span><a class="crumb" href="cha.obs.build_process.html">Build Process</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">User Guide</div><ol><li><a href="bk01pr01.html" class=" "><span class="title-number"> </span><span class="title-name">About this Guide</span></a></li><li><a href="par.first_steps.html" class="has-children "><span class="title-number">I </span><span class="title-name">First Steps</span></a><ol><li><a href="art.obs.bg.html" class=" "><span class="title-number">1 </span><span class="title-name">Beginnerʼs Guide</span></a></li></ol></li><li><a href="par.concepts.html" class="has-children "><span class="title-number">II </span><span class="title-name">Concepts</span></a><ol><li><a href="cha.obs.package_formats.html" class=" "><span class="title-number">2 </span><span class="title-name">Supported Build Recipes and Package Formats</span></a></li></ol></li><li><a href="bk01pt03.html" class="has-children "><span class="title-number">III </span><span class="title-name">Setup</span></a><ol><li><a href="cha.obs.osc.html" class=" "><span class="title-number">3 </span><span class="title-name">osc, the Command Line Tool</span></a></li><li><a href="cha.obs.prjconfig.html" class=" "><span class="title-number">4 </span><span class="title-name">Build Configuration</span></a></li></ol></li><li><a href="par.working.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Usage</span></a><ol><li><a href="cha.obs.basicworkflow.html" class=" "><span class="title-number">5 </span><span class="title-name">Basic OBS Workflow</span></a></li><li><a href="cha.obs.building.html" class=" "><span class="title-number">6 </span><span class="title-name">Local Building</span></a></li><li><a href="cha.obs.source_service.html" class=" "><span class="title-number">7 </span><span class="title-name">Using Source Services</span></a></li><li><a href="cha.obs.scm_ci_workflow_integration.html" class=" "><span class="title-number">8 </span><span class="title-name">SCM/CI Workflow Integration</span></a></li><li><a href="cha.obs.stagingworkflow.html" class=" "><span class="title-number">9 </span><span class="title-name">Staging Workflow</span></a></li><li><a href="cha.obs.notifications.html" class=" "><span class="title-number">10 </span><span class="title-name">Notifications</span></a></li><li><a href="cha.obs.moderation.html" class=" "><span class="title-number">11 </span><span class="title-name">Moderation</span></a></li></ol></li><li><a href="par.best_practices.html" class="has-children "><span class="title-number">V </span><span class="title-name">Best Practices</span></a><ol><li><a href="cha.obs.best-practices.webuiusage.html" class=" "><span class="title-number">12 </span><span class="title-name">Using the OBS Web UI</span></a></li><li><a href="cha.obs.best-practices.basics.html" class=" "><span class="title-number">13 </span><span class="title-name">Basic Concepts and Work Styles</span></a></li><li><a href="cha.obs.best-practices.scm_integration.html" class=" "><span class="title-number">14 </span><span class="title-name">How to integrate external SCM sources</span></a></li><li><a href="cha.obs.best-practices.upstream.html" class=" "><span class="title-number">15 </span><span class="title-name">Publishing Upstream Binaries</span></a></li><li><a href="cha.obs.best-practices.bootstrapping.html" class=" "><span class="title-number">16 </span><span class="title-name">Bootstrapping</span></a></li><li><a href="cha.obs.best-practices.oscexamples.html" class=" "><span class="title-number">17 </span><span class="title-name"><code class="command">osc</code> Example Commands</span></a></li><li><a href="cha.obs.best-practices.advanced.html" class=" "><span class="title-number">18 </span><span class="title-name">Advanced Project Setups</span></a></li><li><a href="cha.obs.best-practices.kmp.html" class=" "><span class="title-number">19 </span><span class="title-name">Building Kernel Modules</span></a></li><li><a href="cha.obs.best-practices.howto.html" class=" "><span class="title-number">20 </span><span class="title-name">Common Questions and Solutions</span></a></li></ol></li><li class="active"><a href="par.reference.html" class="has-children you-are-here"><span class="title-number">VI </span><span class="title-name">Reference</span></a><ol><li><a href="cha.obs.architecture.html" class=" "><span class="title-number">21 </span><span class="title-name">OBS Architecture</span></a></li><li><a href="cha.obs.concepts.html" class=" "><span class="title-number">22 </span><span class="title-name">OBS Concepts</span></a></li><li><a href="cha.obs.build_process.html" class=" you-are-here"><span class="title-number">23 </span><span class="title-name">Build Process</span></a></li><li><a href="cha.obs.build_containers.html" class=" "><span class="title-number">24 </span><span class="title-name">Build Containers</span></a></li><li><a href="cha.obs.source_management.html" class=" "><span class="title-number">25 </span><span class="title-name">Source Management</span></a></li><li><a href="cha.obs.scm_bridge.html" class=" "><span class="title-number">26 </span><span class="title-name">SCM Bridge</span></a></li><li><a href="cha.obs.supported_formats.html" class=" "><span class="title-number">27 </span><span class="title-name">Supported Formats</span></a></li><li><a href="cha.obs.request_and_review_system.html" class=" "><span class="title-number">28 </span><span class="title-name">Request And Review System</span></a></li><li><a href="cha.obs.image_templates.html" class=" "><span class="title-number">29 </span><span class="title-name">Image Templates</span></a></li><li><a href="cha.obs.multibuild.html" class=" "><span class="title-number">30 </span><span class="title-name">Multiple Build Description File Handling</span></a></li><li><a href="cha.obs.maintenance_setup.html" class=" "><span class="title-number">31 </span><span class="title-name">Maintenance Support</span></a></li><li><a href="cha.obs.binary_tracking.html" class=" "><span class="title-number">32 </span><span class="title-name">Binary Package Tracking</span></a></li><li><a href="cha.obs.build_scheduling_and_dispatching.html" class=" "><span class="title-number">33 </span><span class="title-name">Scheduling and Dispatching</span></a></li><li><a href="cha.obs.build_constraints.html" class=" "><span class="title-number">34 </span><span class="title-name">Build Constraints</span></a></li><li><a href="cha.obs.build_preinstall.html" class=" "><span class="title-number">35 </span><span class="title-name">Building Preinstall Images</span></a></li><li><a href="cha.obs.authorization.token.html" class=" "><span class="title-number">36 </span><span class="title-name">Authorization</span></a></li><li><a href="cha.obs.qa_hooks.html" class=" "><span class="title-number">37 </span><span class="title-name">Quality Assurance(QA) Hooks</span></a></li><li><a href="cha.obs.factory.html" class=" "><span class="title-number">38 </span><span class="title-name">openSUSE Factory</span></a></li></ol></li><li><a href="obs.glossary.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="bk01apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU Licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha.obs.build_process" data-id-title="Build Process"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">23 </span><span class="title-name">Build Process</span></span> <a title="Permalink" class="permalink" href="cha.obs.build_process.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
  The build process creates new binaries from sources, binaries, and config.
  This process may run on the OBS server side or on a
  local workstation. Each package build is created in a fresh environment. This is done to
  ensure that the environment is reproducible.
 </p><section class="sect1" id="id-1.2.10.4.3" data-id-title="Phases of a Build Process"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.1 </span><span class="title-name">Phases of a Build Process</span></span> <a title="Permalink" class="permalink" href="cha.obs.build_process.html#id-1.2.10.4.3">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
   All sources and binaries which are hosted inside Open Build Service are organized in
   projects. Projects host sources inside of OBS packages. The sources are
   built according to the repository configuration inside of the project.
  </p><section class="sect2" id="id-1.2.10.4.3.3" data-id-title="Preinstall Phase"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.1.1 </span><span class="title-name">Preinstall Phase</span></span> <a title="Permalink" class="permalink" href="cha.obs.build_process.html#id-1.2.10.4.3.3">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
    This phase depends on the type of the buildroot (building
    environment). OBS supports multiple types of build environments, for example:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       chroot
      </p></li><li class="listitem"><p>
       Xen
      </p></li><li class="listitem"><p>
       KVM
      </p></li><li class="listitem"><p>
       Qemu
      </p></li></ul></div><p>
    In the preinstall phase, the OBS Worker creates a small
    base system from the packages declared to be preinstalled (file
    system, coreutils, binutils, rpm/debutils, etc.). The tools installed in this
    phase must only provide the minimum functionality necessary to allow installing
    further packages. In addition it copies all necessary build requirements and
    the source into the base system. </p></section><section class="sect2" id="id-1.2.10.4.3.4" data-id-title="Install Phase"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.1.2 </span><span class="title-name">Install Phase</span></span> <a title="Permalink" class="permalink" href="cha.obs.build_process.html#id-1.2.10.4.3.4">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
    Depending on the chosen build environment, the worker may start a
    virtual machine, an emulator or just enter the build root. If this was successful, the
    install phase reinstalls all base packages from above and additionally all
    packages you have defined in your build recipe plus dependencies. After this phase the
    environment is ready to process the build recipe.
   </p></section><section class="sect2" id="id-1.2.10.4.3.5" data-id-title="Package Build"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.1.3 </span><span class="title-name">Package Build</span></span> <a title="Permalink" class="permalink" href="cha.obs.build_process.html#id-1.2.10.4.3.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
    Depending on the type of package, the build environment executes different build
    commands, for example:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      RPM-based distributions: <code class="command">rpmbuild</code>
     </p></li><li class="listitem"><p>
      Debian-based distributions: <code class="command">dpkg-buildpackage</code>
     </p></li><li class="listitem"><p>
      Arch Linux: <code class="command">pacman</code>
     </p></li><li class="listitem"><p>
      Kiwi image: <code class="command">kiwi</code>.
     </p></li></ul></div><p>
    How the build continues depends on the quality and the type of your build
    recipe. In most cases, the source code will be compiled now and then be
    packed into the chosen package format.
   </p><p>
    To improve package quality, on RPM-based distributions there are
    additional checks provided via packages. A common toolchain for handling
    checks is for example <code class="command">rpmlint</code>.
   </p></section><section class="sect2" id="id-1.2.10.4.3.6" data-id-title="After the Build"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.1.4 </span><span class="title-name">After the Build</span></span> <a title="Permalink" class="permalink" href="cha.obs.build_process.html#id-1.2.10.4.3.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
     The generated packages are extracted from the build environment and transferred
     back to the server by the worker. The build result might be postprocessed by
     followup build jobs. Afterwards the resulting files may get signed.
   </p></section></section><section class="sect1" id="id-1.2.10.4.4" data-id-title="Identify a build"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23.2 </span><span class="title-name">Identify a build</span></span> <a title="Permalink" class="permalink" href="cha.obs.build_process.html#id-1.2.10.4.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
    OBS is usually tagging each build with an identifier. This can be used to find the building
    OBS instance, the project, repository and exact source for a binary. This information is
    stored in some variable called DISTURL and is specified as
     <code class="command">obs://$OBS_INSTANCE/$PROJECT/$REPOSITORY/$SOURCE_REVISION-$PACKAGE(:$FLAVOR)</code>.
    Note that the final segment, <code class="literal">:$FLAVOR</code>, is optional and exists only for packages built using the multibuild feature.

    The source specified via the DISTURL can be accessed by pasting the URL into the search interface
    of the OBS web interface. Or use the command line tool to check it out:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command"># osc checkout $DISTURL</code></pre></div><p>
    You need to go to the right OBS instance as this is not handled automatically yet.
  </p><section class="sect2" id="id-1.2.10.4.4.5" data-id-title="Read DISTURL from an RPM"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.2.1 </span><span class="title-name">Read DISTURL from an RPM</span></span> <a title="Permalink" class="permalink" href="cha.obs.build_process.html#id-1.2.10.4.4.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
    RPM binaries contain the DISTURL as tag. It can be read from the rpm database for installed RPMs and
    also from the rpm binaries itself.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command"># rpm -q --qf '%{DISTRL}\n' $rpm</code></pre></div></section><section class="sect2" id="id-1.2.10.4.4.6" data-id-title="Read DISTURL from a container"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">23.2.2 </span><span class="title-name">Read DISTURL from a container</span></span> <a title="Permalink" class="permalink" href="cha.obs.build_process.html#id-1.2.10.4.4.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
    Containers store the DISTURL as label. You will see only the DISTURL from the highest layer via
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command"># docker inspect --format '{{.Config.Labels}}' $image_id</code></pre></div><p>
    The disturl is always set via the key 'org.openbuildservice.disturl'.
   </p></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha.obs.concepts.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 22 </span>OBS Concepts</span></a> </div><div><a class="pagination-link next" href="cha.obs.build_containers.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 24 </span>Build Containers</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha.obs.build_process.html#id-1.2.10.4.3"><span class="title-number">23.1 </span><span class="title-name">Phases of a Build Process</span></a></span></li><li><span class="sect1"><a href="cha.obs.build_process.html#id-1.2.10.4.4"><span class="title-number">23.2 </span><span class="title-name">Identify a build</span></a></span></li></ul></div> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>User Guide | Scheduling and Dispatching</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Scheduling and Dispatching"/>
<meta name="description" content="One of the major functionalities of OBS is to calculate always the current state, based on available sources, binaries and user configurations. In ca…"/>
<meta name="book-title" content="User Guide"/>
<meta name="chapter-title" content="Chapter 33. Scheduling and Dispatching"/>
<meta name="tracker-url" content="https://github.com/openSUSE/obs-docu/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Scheduling and Dispatching"/>
<meta property="og:description" content="One of the major functionalities of OBS is to calculate alw…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Scheduling and Dispatching"/>
<meta name="twitter:description" content="One of the major functionalities of OBS is to calculate alw…"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Scheduling and Dispatching",
  
    "description": "Scheduling and Dispatching",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-obs-binary-tracking.html" title="Chapter 32. Binary Package Tracking"/><link rel="next" href="cha-obs-build-constraints.html" title="Chapter 34. Build Constraints"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="wide offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"/></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">User Guide</a><span> / </span><a class="crumb" href="par-reference.html">Reference</a><span> / </span><a class="crumb" href="cha-obs-build-scheduling-and-dispatching.html">Scheduling and Dispatching</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">User Guide</div><ol><li><a href="bk01pr01.html" class=" "><span class="title-number"> </span><span class="title-name">About this Guide</span></a></li><li><a href="par-first-steps.html" class="has-children "><span class="title-number">I </span><span class="title-name">First Steps</span></a><ol><li><a href="art-obs-bg.html" class=" "><span class="title-number">1 </span><span class="title-name">Beginnerʼs Guide</span></a></li></ol></li><li><a href="par-concepts.html" class="has-children "><span class="title-number">II </span><span class="title-name">Concepts</span></a><ol><li><a href="cha-obs-package-formats.html" class=" "><span class="title-number">2 </span><span class="title-name">Supported Build Recipes and Package Formats</span></a></li></ol></li><li><a href="bk01pt03.html" class="has-children "><span class="title-number">III </span><span class="title-name">Setup</span></a><ol><li><a href="cha-obs-osc.html" class=" "><span class="title-number">3 </span><span class="title-name">osc, the Command Line Tool</span></a></li><li><a href="cha-obs-prjconfig.html" class=" "><span class="title-number">4 </span><span class="title-name">Build Configuration</span></a></li></ol></li><li><a href="par-working.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Usage</span></a><ol><li><a href="cha-obs-basicworkflow.html" class=" "><span class="title-number">5 </span><span class="title-name">Basic OBS Workflow</span></a></li><li><a href="cha-obs-local-building.html" class=" "><span class="title-number">6 </span><span class="title-name">Local Building</span></a></li><li><a href="cha-obs-source-services.html" class=" "><span class="title-number">7 </span><span class="title-name">Using Source Services</span></a></li><li><a href="cha-obs-scm-ci-workflow-integration.html" class=" "><span class="title-number">8 </span><span class="title-name">SCM/CI Workflow Integration</span></a></li><li><a href="cha-obs-stagingworkflow.html" class=" "><span class="title-number">9 </span><span class="title-name">Staging Workflow</span></a></li><li><a href="cha-obs-notifications.html" class=" "><span class="title-number">10 </span><span class="title-name">Notifications</span></a></li><li><a href="cha-obs-moderation.html" class=" "><span class="title-number">11 </span><span class="title-name">Moderation</span></a></li></ol></li><li><a href="par-best-practices.html" class="has-children "><span class="title-number">V </span><span class="title-name">Best Practices</span></a><ol><li><a href="cha-obs-best-practices-webuiusage.html" class=" "><span class="title-number">12 </span><span class="title-name">Using the OBS Web UI</span></a></li><li><a href="cha-obs-best-practices-basics.html" class=" "><span class="title-number">13 </span><span class="title-name">Basic Concepts and Work Styles</span></a></li><li><a href="cha-obs-best-practices-scm-integration.html" class=" "><span class="title-number">14 </span><span class="title-name">How to integrate external SCM sources</span></a></li><li><a href="cha-obs-best-practices-upstream.html" class=" "><span class="title-number">15 </span><span class="title-name">Publishing Upstream Binaries</span></a></li><li><a href="cha-obs-best-practices-bootstrapping.html" class=" "><span class="title-number">16 </span><span class="title-name">Bootstrapping</span></a></li><li><a href="cha-obs-best-practices-oscexamples.html" class=" "><span class="title-number">17 </span><span class="title-name"><code class="command">osc</code> Example Commands</span></a></li><li><a href="cha-obs-best-practices-advanced.html" class=" "><span class="title-number">18 </span><span class="title-name">Advanced Project Setups</span></a></li><li><a href="cha-obs-best-practices-kmp.html" class=" "><span class="title-number">19 </span><span class="title-name">Building Kernel Modules</span></a></li><li><a href="cha-obs-best-practices-howto.html" class=" "><span class="title-number">20 </span><span class="title-name">Common Questions and Solutions</span></a></li></ol></li><li class="active"><a href="par-reference.html" class="has-children you-are-here"><span class="title-number">VI </span><span class="title-name">Reference</span></a><ol><li><a href="cha-obs-architecture.html" class=" "><span class="title-number">21 </span><span class="title-name">OBS Architecture</span></a></li><li><a href="cha-obs-concepts.html" class=" "><span class="title-number">22 </span><span class="title-name">OBS Concepts</span></a></li><li><a href="cha-obs-build-process.html" class=" "><span class="title-number">23 </span><span class="title-name">Build Process</span></a></li><li><a href="cha-obs-build-containers.html" class=" "><span class="title-number">24 </span><span class="title-name">Build Containers</span></a></li><li><a href="cha-obs-source-management.html" class=" "><span class="title-number">25 </span><span class="title-name">Source Management</span></a></li><li><a href="cha-obs-scm-bridge.html" class=" "><span class="title-number">26 </span><span class="title-name">SCM Bridge</span></a></li><li><a href="cha-obs-supported-formats.html" class=" "><span class="title-number">27 </span><span class="title-name">Supported Formats</span></a></li><li><a href="cha-obs-request-and-review-system.html" class=" "><span class="title-number">28 </span><span class="title-name">Request And Review System</span></a></li><li><a href="cha-obs-image-templates.html" class=" "><span class="title-number">29 </span><span class="title-name">Image Templates</span></a></li><li><a href="cha-obs-multibuild.html" class=" "><span class="title-number">30 </span><span class="title-name">Multiple Build Description File Handling</span></a></li><li><a href="cha-obs-maintenance-setup.html" class=" "><span class="title-number">31 </span><span class="title-name">Maintenance Support</span></a></li><li><a href="cha-obs-binary-tracking.html" class=" "><span class="title-number">32 </span><span class="title-name">Binary Package Tracking</span></a></li><li><a href="cha-obs-build-scheduling-and-dispatching.html" class=" you-are-here"><span class="title-number">33 </span><span class="title-name">Scheduling and Dispatching</span></a></li><li><a href="cha-obs-build-constraints.html" class=" "><span class="title-number">34 </span><span class="title-name">Build Constraints</span></a></li><li><a href="cha-obs-build-preinstall.html" class=" "><span class="title-number">35 </span><span class="title-name">Building Preinstall Images</span></a></li><li><a href="cha-obs-authorization-token.html" class=" "><span class="title-number">36 </span><span class="title-name">Authorization</span></a></li><li><a href="cha-obs-qa-hooks.html" class=" "><span class="title-number">37 </span><span class="title-name">Quality Assurance(QA) Hooks</span></a></li></ol></li><li><a href="obs-glossary.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="bk01apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU Licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-obs-build-scheduling-and-dispatching" data-id-title="Scheduling and Dispatching"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">33 </span><span class="title-name">Scheduling and Dispatching</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-scheduling-and-dispatching.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> One of the major functionalities of OBS is to calculate always the
  current state, based on available sources, binaries and user configurations.
  In case a change happened it will trigger builds to achieve a clean state
  again. The calculation of the need of a build job is called scheduling here.
  The assignment of a build job to a concrete build host (aka worker) is called
  dispatching. </p><section class="sect1" id="id-1.2.10.14.4" data-id-title="Definition of a Build Process"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">33.1 </span><span class="title-name">Definition of a Build Process</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> A build process is calculated and executed based on the following </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p> The sources of a package defined which dependencies are required at
     build time. For example, <em class="parameter">BuildRequires</em> lines in spec files
     defined which other packages must get installed to build a package </p></li><li class="listitem"><p> The project configuration of the package defines repositories and
     architectures to build for. In case other repositories are used as a base
     the configuration from there is also considered. </p></li><li class="listitem"><p> Dependencies of packages which are required are considered as well.
    </p></li><li class="listitem"><p> Constraints regarding the worker are considered. A package may
     require certain amount of resources or specific features to build. Check
     the constraints chapter for details. However, apart from this the build
     should be independent of the specific worker where the job gets dispatched
     to. </p></li></ul></div></section><section class="sect1" id="id-1.2.10.14.5" data-id-title="Scheduling Strategies"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">33.2 </span><span class="title-name">Scheduling Strategies</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.5">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The defaults have the goal of creating an always reproducible state.
   This may lead to more builds than practically necessary, but ensures that no
   hidden incompatibilities exist between packages and also that the same state
   can later be achieved again (with a subsequent rebuild of the same sources
   and configurations). This can also lead to multiple builds of the same
   package in the case of dependency loops. </p><p> In some setups this may not be wanted, so each repository can be
   configured differently. The usual options to modify the project meta
   configurations can be used to configure different strategies. For example
   using osc:</p><div class="verbatim-wrap"><pre class="screen">osc meta prj -e YOUR_PROJECT</pre></div><p>A repository is configured as following by default, however only the
   name attribute is required to be set.</p><div class="verbatim-wrap"><pre class="screen"># Example &lt;repository
    name="standard" rebuild="transitive" block="all" linkedbuild="off"&gt; [...]
    &lt;/repository&gt;</pre></div><section class="sect2" id="id-1.2.10.14.5.7" data-id-title="Build Trigger Setting"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">33.2.1 </span><span class="title-name">Build Trigger Setting</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.5.7">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> The build trigger setting can be set via the "rebuild" attribute.
    Possible settings are </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.2.10.14.5.7.3.1"><span class="term">transitive</span></dt><dd><p> The default behavior, do a clean build of all dependant packages
      </p></dd><dt id="id-1.2.10.14.5.7.3.2"><span class="term">direct</span></dt><dd><p> Just build the package with changed sources and direct dependant
       packages. But not indirect dependant packages. </p></dd><dt id="id-1.2.10.14.5.7.3.3"><span class="term">local</span></dt><dd><p> Just build packages with changed sources. </p></dd></dl></div><div id="id-1.2.10.14.5.7.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p> Note: You can run into dependency problems in case you select
      <em class="parameter">direct</em> or <em class="parameter">local</em> without
     noticing this in the build state. Your packages might not even be
     installable or have random runtime errors (like not starting up or
     crashing applications), even when they claim to be "succeeded". Also, you
     cannot be sure that you will be able to re-build them later. So never do
     an official shipment with this setting of a release. This knob is exposed
     to allow deliberate suppression of the strictly reproducible builds (for
     example, to limit burning CPU unnecessarily). </p></div></section><section class="sect2" id="id-1.2.10.14.5.8" data-id-title="Block Mode"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">33.2.2 </span><span class="title-name">Block Mode</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.5.8">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Usually the build of a package gets blocked when a package required
    to build it is still building at the moment. The "block" attribute can
    modify this behaviour: </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.2.10.14.5.8.3.1"><span class="term">all</span></dt><dd><p> The default behavior, do not start the build if a dependant
       package is currently building. </p></dd><dt id="id-1.2.10.14.5.8.3.2"><span class="term">local</span></dt><dd><p> Just care about packages in your project for the block mode.
      </p></dd><dt id="id-1.2.10.14.5.8.3.3"><span class="term">never</span></dt><dd><p> Never set a package to blocked. </p></dd></dl></div><div id="id-1.2.10.14.5.8.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p> When using something other than <span class="quote">“<span class="quote">all</span>”</span> you will have to
     deal with the following problems: </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p> Intermediate builds can have dependency and runtime problems.
      </p></li><li class="listitem"><p> Your packages will get built more often, take more resources on
       the server side. As a result the dispatcher will rate your repository
       down. </p></li></ul></div></div></section><section class="sect2" id="id-1.2.10.14.5.9" data-id-title="Follow Project Links"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">33.2.3 </span><span class="title-name">Follow Project Links</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.5.9">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.2.10.14.5.9.2.1"><span class="term">off</span></dt><dd><p> DEFAULT: do not build packages from project links </p></dd><dt id="id-1.2.10.14.5.9.2.2"><span class="term">localdep</span></dt><dd><p> only build project linked packages if they depend on a local
       package result. </p></dd><dt id="id-1.2.10.14.5.9.2.3"><span class="term">alldirect</span></dt><dd><p> build all packages from the linked projects. Indirectly linked
              projects get not build.
       </p></dd><dt id="id-1.2.10.14.5.9.2.4"><span class="term">all</span></dt><dd><p> build all packages from direct and indirect linked projects</p></dd></dl></div></section></section><section class="sect1" id="id-1.2.10.14.6" data-id-title="Release Number Handling"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">33.3 </span><span class="title-name">Release Number Handling</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>Most build formats define a version and a release number. The version is usually
  defined by the upstream project, while the release number is handled by the distributor.
  In addtion to this Open Build Service differentiates between a source change counter (called check-in counter aka CI_CNT)
  and a build counter (BCNT). The check-in counter gets increased when any source change is done. The build
  counter gets increased when a build gets triggered due to any other reason than a source change.</p><p>The version and check-in counter are defined by the package source, while the build counter is
  stored per project, package, repository and architecture combination.
  </p><section class="sect2" id="id-1.2.10.14.6.4" data-id-title="Build Counter Syncing via Architectures"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">33.3.1 </span><span class="title-name">Build Counter Syncing via Architectures</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.6.4">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The default configuration is to sync build counters across all architectures for a given
   project, package and repository. This can only be changed by the OBS administrator.
   </p></section><section class="sect2" id="id-1.2.10.14.6.5" data-id-title="Build Counter Syncing via multiple packages"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">33.3.2 </span><span class="title-name">Build Counter Syncing via multiple packages</span></span> <a title="Permalink" class="permalink" href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.6.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>In some cases it is critical keep the build counter in sync via multiple packages.
   The old way to do so is to define a common bcntsynctag in package meta. The used string
   identifies the packages to be kept in sync. The package name is the default when no
   bcntsynctag exists. Please note that this affects always all flavors of a multibuild source.
   </p><p>The newer recommended way is to define these tags in the sources instead. These
   work also with git implementations and are more flexible.</p></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-obs-binary-tracking.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 32 </span>Binary Package Tracking</span></a> </div><div><a class="pagination-link next" href="cha-obs-build-constraints.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 34 </span>Build Constraints</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.4"><span class="title-number">33.1 </span><span class="title-name">Definition of a Build Process</span></a></span></li><li><span class="sect1"><a href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.5"><span class="title-number">33.2 </span><span class="title-name">Scheduling Strategies</span></a></span></li><li><span class="sect1"><a href="cha-obs-build-scheduling-and-dispatching.html#id-1.2.10.14.6"><span class="title-number">33.3 </span><span class="title-name">Release Number Handling</span></a></span></li></ul></div> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>
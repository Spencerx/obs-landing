<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>User Guide | SCM Bridge</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="SCM Bridge"/>
<meta name="description" content="The SCM bridge allows the sources of a single package or an entire project to be stored and maintained in any trusted SCM repositories. However, git …"/>
<meta name="book-title" content="User Guide"/>
<meta name="chapter-title" content="Chapter 26. SCM Bridge"/>
<meta name="tracker-url" content="https://github.com/openSUSE/obs-docu/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="SCM Bridge"/>
<meta property="og:description" content="The SCM bridge allows the sources of a single package or an…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SCM Bridge"/>
<meta name="twitter:description" content="The SCM bridge allows the sources of a single package or an…"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Product &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "SCM Bridge",
  
    "description": "SCM Bridge",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      

    "about": [
      
    ],
  
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="prev" href="cha-obs-source-management.html" title="Chapter 25. Source Management"/><link rel="next" href="cha-obs-supported-formats.html" title="Chapter 27. Supported Formats"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="wide offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"/></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">User Guide</a><span> / </span><a class="crumb" href="par-reference.html">Reference</a><span> / </span><a class="crumb" href="cha-obs-scm-bridge.html">SCM Bridge</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">User Guide</div><ol><li><a href="bk01pr01.html" class=" "><span class="title-number"> </span><span class="title-name">About this Guide</span></a></li><li><a href="par-first-steps.html" class="has-children "><span class="title-number">I </span><span class="title-name">First Steps</span></a><ol><li><a href="art-obs-bg.html" class=" "><span class="title-number">1 </span><span class="title-name">Beginnerʼs Guide</span></a></li></ol></li><li><a href="par-concepts.html" class="has-children "><span class="title-number">II </span><span class="title-name">Concepts</span></a><ol><li><a href="cha-obs-package-formats.html" class=" "><span class="title-number">2 </span><span class="title-name">Supported Build Recipes and Package Formats</span></a></li></ol></li><li><a href="bk01pt03.html" class="has-children "><span class="title-number">III </span><span class="title-name">Setup</span></a><ol><li><a href="cha-obs-osc.html" class=" "><span class="title-number">3 </span><span class="title-name">osc, the Command Line Tool</span></a></li><li><a href="cha-obs-prjconfig.html" class=" "><span class="title-number">4 </span><span class="title-name">Build Configuration</span></a></li></ol></li><li><a href="par-working.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Usage</span></a><ol><li><a href="cha-obs-basicworkflow.html" class=" "><span class="title-number">5 </span><span class="title-name">Basic OBS Workflow</span></a></li><li><a href="cha-obs-local-building.html" class=" "><span class="title-number">6 </span><span class="title-name">Local Building</span></a></li><li><a href="cha-obs-source-services.html" class=" "><span class="title-number">7 </span><span class="title-name">Using Source Services</span></a></li><li><a href="cha-obs-scm-ci-workflow-integration.html" class=" "><span class="title-number">8 </span><span class="title-name">SCM/CI Workflow Integration</span></a></li><li><a href="cha-obs-stagingworkflow.html" class=" "><span class="title-number">9 </span><span class="title-name">Staging Workflow</span></a></li><li><a href="cha-obs-notifications.html" class=" "><span class="title-number">10 </span><span class="title-name">Notifications</span></a></li><li><a href="cha-obs-moderation.html" class=" "><span class="title-number">11 </span><span class="title-name">Moderation</span></a></li></ol></li><li><a href="par-best-practices.html" class="has-children "><span class="title-number">V </span><span class="title-name">Best Practices</span></a><ol><li><a href="cha-obs-best-practices-webuiusage.html" class=" "><span class="title-number">12 </span><span class="title-name">Using the OBS Web UI</span></a></li><li><a href="cha-obs-best-practices-basics.html" class=" "><span class="title-number">13 </span><span class="title-name">Basic Concepts and Work Styles</span></a></li><li><a href="cha-obs-best-practices-scm-integration.html" class=" "><span class="title-number">14 </span><span class="title-name">How to integrate external SCM sources</span></a></li><li><a href="cha-obs-best-practices-upstream.html" class=" "><span class="title-number">15 </span><span class="title-name">Publishing Upstream Binaries</span></a></li><li><a href="cha-obs-best-practices-bootstrapping.html" class=" "><span class="title-number">16 </span><span class="title-name">Bootstrapping</span></a></li><li><a href="cha-obs-best-practices-oscexamples.html" class=" "><span class="title-number">17 </span><span class="title-name"><code class="command">osc</code> Example Commands</span></a></li><li><a href="cha-obs-best-practices-advanced.html" class=" "><span class="title-number">18 </span><span class="title-name">Advanced Project Setups</span></a></li><li><a href="cha-obs-best-practices-kmp.html" class=" "><span class="title-number">19 </span><span class="title-name">Building Kernel Modules</span></a></li><li><a href="cha-obs-best-practices-howto.html" class=" "><span class="title-number">20 </span><span class="title-name">Common Questions and Solutions</span></a></li></ol></li><li class="active"><a href="par-reference.html" class="has-children you-are-here"><span class="title-number">VI </span><span class="title-name">Reference</span></a><ol><li><a href="cha-obs-architecture.html" class=" "><span class="title-number">21 </span><span class="title-name">OBS Architecture</span></a></li><li><a href="cha-obs-concepts.html" class=" "><span class="title-number">22 </span><span class="title-name">OBS Concepts</span></a></li><li><a href="cha-obs-build-process.html" class=" "><span class="title-number">23 </span><span class="title-name">Build Process</span></a></li><li><a href="cha-obs-build-containers.html" class=" "><span class="title-number">24 </span><span class="title-name">Build Containers</span></a></li><li><a href="cha-obs-source-management.html" class=" "><span class="title-number">25 </span><span class="title-name">Source Management</span></a></li><li><a href="cha-obs-scm-bridge.html" class=" you-are-here"><span class="title-number">26 </span><span class="title-name">SCM Bridge</span></a></li><li><a href="cha-obs-supported-formats.html" class=" "><span class="title-number">27 </span><span class="title-name">Supported Formats</span></a></li><li><a href="cha-obs-request-and-review-system.html" class=" "><span class="title-number">28 </span><span class="title-name">Request And Review System</span></a></li><li><a href="cha-obs-image-templates.html" class=" "><span class="title-number">29 </span><span class="title-name">Image Templates</span></a></li><li><a href="cha-obs-multibuild.html" class=" "><span class="title-number">30 </span><span class="title-name">Multiple Build Description File Handling</span></a></li><li><a href="cha-obs-maintenance-setup.html" class=" "><span class="title-number">31 </span><span class="title-name">Maintenance Support</span></a></li><li><a href="cha-obs-binary-tracking.html" class=" "><span class="title-number">32 </span><span class="title-name">Binary Package Tracking</span></a></li><li><a href="cha-obs-build-scheduling-and-dispatching.html" class=" "><span class="title-number">33 </span><span class="title-name">Scheduling and Dispatching</span></a></li><li><a href="cha-obs-build-constraints.html" class=" "><span class="title-number">34 </span><span class="title-name">Build Constraints</span></a></li><li><a href="cha-obs-build-preinstall.html" class=" "><span class="title-number">35 </span><span class="title-name">Building Preinstall Images</span></a></li><li><a href="cha-obs-authorization-token.html" class=" "><span class="title-number">36 </span><span class="title-name">Authorization</span></a></li><li><a href="cha-obs-qa-hooks.html" class=" "><span class="title-number">37 </span><span class="title-name">Quality Assurance(QA) Hooks</span></a></li><li><a href="cha-obs-factory.html" class=" "><span class="title-number">38 </span><span class="title-name">openSUSE Factory</span></a></li></ol></li><li><a href="obs-glossary.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="bk01apa.html" class=" "><span class="title-number">A </span><span class="title-name">GNU Licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-obs-scm-bridge" data-id-title="SCM Bridge"><div class="titlepage"><div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">26 </span><span class="title-name">SCM Bridge</span></span> <a title="Permalink" class="permalink" href="cha-obs-scm-bridge.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><section class="sect1" id="sec-obs-obs-scm-bridge" data-id-title="SCM Bridge"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">26.1 </span><span class="title-name">SCM Bridge</span></span> <a title="Permalink" class="permalink" href="cha-obs-scm-bridge.html#sec-obs-obs-scm-bridge">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><section class="sect2" id="sec-obs-obs-scm-bridge-setup-introduction" data-id-title="Introduction"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">26.1.1 </span><span class="title-name">Introduction</span></span> <a title="Permalink" class="permalink" href="cha-obs-scm-bridge.html#sec-obs-obs-scm-bridge-setup-introduction">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The SCM bridge allows the sources of a single package or an entire project
            to be stored and maintained in any trusted SCM repositories.
            However, git is currently the only supported SCM system.</p><p>This allows to manage all packaging-relevant source changes in an external SCM repository using the
      native tooling of the SCM (e.g. git). It is recommended to have this SCM server on the same trust level as the OBS
      instance as it becomes the authoritative source.
      However, any SCM server reachable via network could be used.</p><p>osc can still be used to checkout sources. This will create an SCM repository, so any modification needs to be
      done using the native SCM tooling (e.g. git). osc can still be used for local building and checking server
      side build results.</p><p>Be aware that any source modification mechanics, submit requests or link behaviour may work
      differently or not at all. For example you can not use automatic package source merging via _link files anymore.
      This means also that workflows inside of OBS are not working anymore or are limited. A submit or release
      request would still work with a scmsync (source control management system sync) source,
      but the user would always need to manually specify the target.
      Functionality for when an entire project is managed via scmsync is even more limited.</p><p>Furthermore it is recommended to configure a global notification hook in the SCM server to
      allow OBS to follow the sources automatically.</p></section><section class="sect2" id="sec-obs-obs-scm-bridge-setup-package" data-id-title="Setup a package using the scm bridge"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">26.1.2 </span><span class="title-name">Setup a package using the scm bridge</span></span> <a title="Permalink" class="permalink" href="cha-obs-scm-bridge.html#sec-obs-obs-scm-bridge-setup-package">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The setup is purely done in package meta by defining the SCM URL inside of the scmsync tag:</p><div class="verbatim-wrap"><pre class="screen">&lt;scmsync&gt;https://gitlab.com/some/repository&lt;/scmsync&gt;</pre></div><p>The repository is cloned including all subdirectories and submodules.
            However the build descriptions need to be placed in the top-level directory.</p><p>Large binary files may be stored using git LFS or by referencing external build assets,
            using asset management. These assets will get downloaded and verified as well. The advantage is
            that this information can also be used to compile Software Bills of Materials (SBOMs). Have a look in
            <a class="link" href="http://opensuse.github.io/obs-build/pbuild.html#_remote_assets" target="_blank">the pbuild
            documentation</a> for further details on this. </p><p>In another typical scenario, a package maintainer owns a git repository where
      a build description and distribution specific files are stored. The sources from the upstream
      project may be added via a git submodule. However, for many build types like rpm builds it is recommended
      to build a tar ball at buildtime for the source rpm. This can be achieved with buildtime source services.
      </p></section><section class="sect2" id="sec-obs-obs-scm-bridge-setup-project" data-id-title="Setup an entire project using the SCM bridge"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">26.1.3 </span><span class="title-name">Setup an entire project using the SCM bridge</span></span> <a title="Permalink" class="permalink" href="cha-obs-scm-bridge.html#sec-obs-obs-scm-bridge-setup-project">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>An entire project can be setup by defining the scmsync tag in project meta data. Every top level
            subdirectory of the scm repository is considered as a package.</p><p>Large projects may use git submodules for each package. This avoids the need to
            clone the entire project to modify a single package.</p><p>The build configuration part can get stored as '_config' file in the top level directory.</p><p>It is possible to limit the actual used package sources by specifying an "onlybuild" cgi parameter
      as part of the scmsync url. This parameter can be used multiple times. This is useful,
      for example, when trying to do a test build of just a few packages without the need to modify the source.
      In that way an open merge request may be tested before merging. Example URL:</p><div class="verbatim-wrap"><pre class="screen">&lt;scmsync&gt;https://gitlab.com/some/repository?onlybuild=glibc&amp;onlybuild=kernel&lt;/scmsync&gt;</pre></div></section><section class="sect2" id="sec-obs-obs-scm-bridge-implementation-and-limitations" data-id-title="Implementation and Limitations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">26.1.4 </span><span class="title-name">Implementation and Limitations</span></span> <a title="Permalink" class="permalink" href="cha-obs-scm-bridge.html#sec-obs-obs-scm-bridge-implementation-and-limitations">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The sources are currently cloned for the OBS source server to allow OBS to process them. This
            is to be considered an internal implementation detail and may change in future.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Git submodules: are cloned by default</p></li><li class="listitem"><p>Git VCS history: is not included for server side builds by default to save storage space. It can be included by adding a keepmeta=1 CGI parameter to the URL. This is not needed for local building when using osc.</p></li><li class="listitem"><p>Git LFS files: are included by default. They can be excluded by adding a lfs=0 CGI parameter to the URL.</p></li><li class="listitem"><p>Using just a subdirectory of the git repository can be done by adding a subdir=DIRECTORY CGI parameter to the URL.</p></li><li class="listitem"><p>Architecture specific remote assets can be selected by adding an arch=ARCH CGI parameter to the URL.</p></li></ul></div><p>
         As an example, for the subdirectory case the URL would look like this:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;scmsync&gt;https://gitlab.com/some/repository?subdir=MY_SUBDIRECTORY&lt;/scmsync&gt;</pre></div><section class="sect3" id="sec-obs-obs-scm-bridge-setup-specials-revision" data-id-title="Using a specific revision, tag or branch"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">26.1.4.1 </span><span class="title-name">Using a specific revision, tag or branch</span></span> <a title="Permalink" class="permalink" href="cha-obs-scm-bridge.html#sec-obs-obs-scm-bridge-setup-specials-revision">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The URL can define a revision, tag or branch via an URL fragment. This means the URL can get extended by a
        hash character and the revision, tag or branch.
        </p><div class="verbatim-wrap"><pre class="screen">&lt;scmsync&gt;https://gitlab.com/some/repository#MY_REVISION&lt;/scmsync&gt;</pre></div><p>
              This allows to set up multiple projects building for different branches. It is possible to use
             branches for implementing CI workflows. For example a submission test building just a subset, a clean build
             and a final reviewed build.
        </p></section><section class="sect3" id="sec-obs-obs-scm-bridge-setup-specials-pbuild" data-id-title="Converting to a project git"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">26.1.4.2 </span><span class="title-name">Converting to a project git</span></span> <a title="Permalink" class="permalink" href="cha-obs-scm-bridge.html#sec-obs-obs-scm-bridge-setup-specials-pbuild">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>A project git repository is mostly the same as any project for the pbuild tool. The command </p><div class="verbatim-wrap"><pre class="screen"># osc create-pbuild-config</pre></div><p>
        creates the _config and _pbuild files for a given repository and architecture. The _config file is used by OBS as well as by the build
        configuration (prjconf). The additional _pbuild file is analogous to the OBS project meta, but is not yet
        honored by OBS. Still, it can be included in the git tree for pbuild users.
        </p></section><section class="sect3" id="sec-obs-obs-scm-bridge-setup-specials-fork" data-id-title="Forking a scmsync package"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">26.1.4.3 </span><span class="title-name">Forking a scmsync package</span></span> <a title="Permalink" class="permalink" href="cha-obs-scm-bridge.html#sec-obs-obs-scm-bridge-setup-specials-fork">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The OBS server allows to create a cloned project with another package using a specified
        SCM repository. This can be used by tooling to create forked test builds for merge requests.
        The api POST route for this is
        </p><div class="verbatim-wrap"><pre class="screen">/source/PROJECT/PACKAGE?cmd=fork&amp;scmsync=NEW_SCM_URL</pre></div></section></section><section class="sect2" id="sec-obs-obs-scm-bridge-update-notifications" data-id-title="SCM Source Updates"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">26.1.5 </span><span class="title-name">SCM Source Updates</span></span> <a title="Permalink" class="permalink" href="cha-obs-scm-bridge.html#sec-obs-obs-scm-bridge-update-notifications">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The OBS instance needs to get notified on any change in the SCM server. There are two ways to achieve this.
      One way is via single configurations for each git repository as documented in the <a class="xref" href="cha-obs-source-services.html#sec-obs-sserv-token-usage" title="7.6. Trigger a service run via a webhook">Section 7.6, “Trigger a service run via a webhook”</a> documentation.
      An alternative way is to configure it globally. This requires admin permissions on the git hosting side
      and another bridge implementation. The advantage is that any used repository will be synced automatically just
      by referencing it via the scmsync meta tag.
      </p><p>
      The update notification has been only implemented for gitea atm, you can find details in the <a class="link" href="https://github.com/openSUSE/obs-gitea-bridge" target="_blank">obs-gitea-bridge</a> documentation.
      </p></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-obs-source-management.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 25 </span>Source Management</span></a> </div><div><a class="pagination-link next" href="cha-obs-supported-formats.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 27 </span>Supported Formats</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-obs-scm-bridge.html#sec-obs-obs-scm-bridge"><span class="title-number">26.1 </span><span class="title-name">SCM Bridge</span></a></span></li></ul></div> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>